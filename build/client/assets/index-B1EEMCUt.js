const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/file-select-modal-BYgoe6ls.js","assets/heroui-Bz7xh-Ot.js","assets/react-aria-BB-B6ByS.js","assets/motion-DjIk6R6f.js","assets/tanstack-COvimw4s.js","assets/icons-DYC7QuA0.js","assets/real-debrid-account-info-yGCQGTtv.js","assets/watch._.lazy-CF3R6hVq.js","assets/watch._-Co4h7IPY.css"])))=>i.map(i=>d[i]);
import{d as e,g as t,r,j as s,A as a,I as n,c as i,u as o,f as l,h as c,i as d,k as u,s as f,l as m,m as p,n as h,o as y,p as g,q as b,v as x,w as v,R as w,x as j,y as k,z as _,B as S,C as A,D as C,E as N,F as D,G as V,H as E,J as F}from"./file-select-modal-BYgoe6ls.js";import{d as O,S as I,O as L,e as M,L as R,f as P,g as $,h as T,i as U,j as B,N as z,l as H,r as q,m as K,n as W,u as Q,b as G,o as X,p as Y,R as J}from"./tanstack-COvimw4s.js";import{n as Z,k as ee,l as te,t as re,o as se,q as ae,c as ne,r as ie,s as oe,u as le,v as ce,b as de,w as ue,x as fe,y as me,z as pe,A as he,B as ye,C as ge,D as be,E as xe,H as ve}from"./heroui-Bz7xh-Ot.js";import"./react-aria-BB-B6ByS.js";import"./icons-DYC7QuA0.js";import"./motion-DjIk6R6f.js";function we(){return null}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var je,ke={};const _e=t(function(){if(je)return ke;je=1;var t=e();return ke.createRoot=t.createRoot,ke.hydrateRoot=t.hydrateRoot,ke}());let Se,Ae,Ce,Ne={data:""},De=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ve=/\/\*[^]*?\*\/|  +/g,Ee=/\n+/g,Fe=(e,t)=>{let r="",s="",a="";for(let n in e){let i=e[n];"@"==n[0]?"i"==n[1]?r=n+" "+i+";":s+="f"==n[1]?Fe(i,n):n+"{"+Fe(i,"k"==n[1]?"":t)+"}":"object"==typeof i?s+=Fe(i,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):n):null!=i&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Fe.p?Fe.p(n,i):n+":"+i+";")}return r+(t&&a?t+"{"+a+"}":a)+s},Oe={},Ie=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Ie(e[r]);return t}return e};function Le(e){let t=this||{},r=e.call?e(t.p):e;return((e,t,r,s,a)=>{let n=Ie(e),i=Oe[n]||(Oe[n]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(n));if(!Oe[i]){let t=n!==e?e:(e=>{let t,r,s=[{}];for(;t=De.exec(e.replace(Ve,""));)t[4]?s.shift():t[3]?(r=t[3].replace(Ee," ").trim(),s.unshift(s[0][r]=s[0][r]||{})):s[0][t[1]]=t[2].replace(Ee," ").trim();return s[0]})(e);Oe[i]=Fe(a?{["@keyframes "+i]:t}:t,r?"":"."+i)}let o=r&&Oe.g?Oe.g:null;return r&&(Oe.g=Oe[i]),l=Oe[i],c=t,d=s,(u=o)?c.data=c.data.replace(u,l):-1===c.data.indexOf(l)&&(c.data=d?l+c.data:c.data+l),i;var l,c,d,u})(r.unshift?r.raw?((e,t,r)=>e.reduce((e,s,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?"."+t:e&&"object"==typeof e?e.props?"":Fe(e,""):!1===e?"":e}return e+s+(null==n?"":n)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,(s=t.target,"object"==typeof window?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||Ne),t.g,t.o,t.k);var s}Le.bind({g:1});let Me=Le.bind({k:1});function Re(e,t){let r=this||{};return function(){let t=arguments;return function s(a,n){let i=Object.assign({},a),o=i.className||s.className;r.p=Object.assign({theme:Ae&&Ae()},i),r.o=/ *go\d+/.test(o),i.className=Le.apply(r,t)+(o?" "+o:"");let l=e;return e[0]&&(l=i.as||e,delete i.as),Ce&&l[0]&&Ce(i),Se(l,i)}}}var Pe=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,$e=(()=>{let e=0;return()=>(++e).toString()})(),Te=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Ue=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return Ue(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+a}))}}},Be=[],ze={toasts:[],pausedAt:void 0},He=e=>{ze=Ue(ze,e),Be.forEach(e=>{e(ze)})},qe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ke=e=>(t,r)=>{let s=((e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||$e()}))(t,e,r);return He({type:2,toast:s}),s.id},We=(e,t)=>Ke("blank")(e,t);We.error=Ke("error"),We.success=Ke("success"),We.loading=Ke("loading"),We.custom=Ke("custom"),We.dismiss=e=>{He({type:3,toastId:e})},We.remove=e=>He({type:4,toastId:e}),We.promise=(e,t,r)=>{let s=We.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let a=t.success?Pe(t.success,e):void 0;return a?We.success(a,{id:s,...r,...null==r?void 0:r.success}):We.dismiss(s),e}).catch(e=>{let a=t.error?Pe(t.error,e):void 0;a?We.error(a,{id:s,...r,...null==r?void 0:r.error}):We.dismiss(s)}),e};var Qe,Ge,Xe,Ye,Je=(e,t)=>{He({type:1,toast:{id:e,height:t}})},Ze=()=>{He({type:5,time:Date.now()})},et=new Map,tt=e=>{let{toasts:t,pausedAt:s}=((e={})=>{let[t,s]=r.useState(ze),a=r.useRef(ze);r.useEffect(()=>(a.current!==ze&&s(ze),Be.push(s),()=>{let e=Be.indexOf(s);e>-1&&Be.splice(e,1)}),[]);let n=t.toasts.map(t=>{var r,s,a;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(s=e[t.type])?void 0:s.duration)||(null==e?void 0:e.duration)||qe[t.type],style:{...e.style,...null==(a=e[t.type])?void 0:a.style,...t.style}}});return{...t,toasts:n}})(e);r.useEffect(()=>{if(s)return;let e=Date.now(),r=t.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout(()=>We.dismiss(t.id),r);t.visible&&We.dismiss(t.id)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[t,s]);let a=r.useCallback(()=>{s&&He({type:6,time:Date.now()})},[s]),n=r.useCallback((e,r)=>{let{reverseOrder:s=!1,gutter:a=8,defaultPosition:n}=r||{},i=t.filter(t=>(t.position||n)===(e.position||n)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...s?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+a,0)},[t]);return r.useEffect(()=>{t.forEach(e=>{if(e.dismissed)((e,t=1e3)=>{if(et.has(e))return;let r=setTimeout(()=>{et.delete(e),He({type:4,toastId:e})},t);et.set(e,r)})(e.id,e.removeDelay);else{let t=et.get(e.id);t&&(clearTimeout(t),et.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:Je,startPause:Ze,endPause:a,calculateOffset:n}}},rt=Me`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,st=Me`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,at=Me`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nt=Re("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${rt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${st} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${at} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,it=Me`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ot=Re("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${it} 1s linear infinite;
`,lt=Me`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ct=Me`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,dt=Re("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ct} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ut=Re("div")`
  position: absolute;
`,ft=Re("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,mt=Me`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pt=Re("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${mt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ht=({toast:e})=>{let{icon:t,type:s,iconTheme:a}=e;return void 0!==t?"string"==typeof t?r.createElement(pt,null,t):t:"blank"===s?null:r.createElement(ft,null,r.createElement(ot,{...a}),"loading"!==s&&r.createElement(ut,null,"error"===s?r.createElement(nt,{...a}):r.createElement(dt,{...a})))},yt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,gt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,bt=Re("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xt=Re("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,vt=r.memo(({toast:e,position:t,style:s,children:a})=>{let n=e.height?((e,t)=>{let r=e.includes("top")?1:-1,[s,a]=Te()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[yt(r),gt(r)];return{animation:t?`${Me(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Me(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},i=r.createElement(ht,{toast:e}),o=r.createElement(xt,{...e.ariaProps},Pe(e.message,e));return r.createElement(bt,{className:e.className,style:{...n,...s,...e.style}},"function"==typeof a?a({icon:i,message:o}):r.createElement(r.Fragment,null,i,o))});Qe=r.createElement,Fe.p=Ge,Se=Qe,Ae=Xe,Ce=Ye;var wt=({id:e,className:t,style:s,onHeightUpdate:a,children:n})=>{let i=r.useCallback(t=>{if(t){let r=()=>{let r=t.getBoundingClientRect().height;a(e,r)};r(),new MutationObserver(r).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return r.createElement("div",{ref:i,className:t,style:s},n)},jt=Le`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,kt=({reverseOrder:e,position:t="top-center",toastOptions:s,gutter:a,children:n,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=tt(s);return r.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(s=>{let i=s.position||t,o=((e,t)=>{let r=e.includes("top"),s=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Te()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...s,...a}})(i,c.calculateOffset(s,{reverseOrder:e,gutter:a,defaultPosition:t}));return r.createElement(wt,{id:s.id,key:s.id,onHeightUpdate:c.updateHeight,className:s.visible?jt:"",style:o},"custom"===s.type?Pe(s.message,s):n?n(s):r.createElement(vt,{toast:s,position:i}))}))},_t=We;function St({children:e}){const t=M(),s=t.at(-1)?.meta?.find(e=>e.title);return r.useEffect(()=>{document.title=s?.title||"Real Debrid"},[s]),e}const At=O()({component:()=>s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-radial"}),s.jsx(I,{}),s.jsx(St,{children:s.jsx(L,{})})]})}),Ct="theme",Nt=e=>{document.documentElement.classList.toggle("dark","dark"===e)},Dt=()=>{const[e,t]=r.useState("dark"),[i,o]=r.useState(!1);r.useEffect(()=>{const e=(()=>{const e=localStorage.getItem(Ct);return"light"===e||"dark"===e?e:null})(),r=e??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");if(o(!e),t(r),Nt(r),e)return;const s=window.matchMedia("(prefers-color-scheme: dark)"),a=e=>{const r=e.matches?"dark":"light";t(r),Nt(r)};return s.addEventListener("change",a),()=>s.removeEventListener("change",a)},[]);const l=r.useMemo(()=>i?`Toggle theme (currently ${e}, system)`:`Toggle theme (currently ${e})`,[e,i]);return s.jsxs(Z,{className:"px-0 hidden md:flex w-full",children:[s.jsx(ee,{className:"justify-start pl-4 flex-grow-0",children:s.jsx(R,{to:"/",children:s.jsx("p",{className:"font-bold text-inherit",children:"rdebrid"})})}),s.jsx(te,{className:"flex-grow"}),s.jsx(te,{className:"flex-grow-0",justify:"end",children:s.jsxs("ul",{className:"flex items-center gap-2",children:[s.jsx("li",{children:s.jsx(a,{as:"a",href:"https://github.com/andesco/rdebrid-worker",target:"_blank",rel:"noopener noreferrer",variant:"light",isIconOnly:!0,"aria-label":"Open GitHub repository",className:"text-default-600 hover:text-primary",children:s.jsx(n.Github,{})})}),s.jsx("li",{children:s.jsx(a,{onPress:()=>{const r="dark"===e?"light":"dark";o(!1),t(r),Nt(r),localStorage.setItem(Ct,r)},variant:"light",isIconOnly:!0,"aria-label":l,className:"text-default-600 hover:text-primary",children:"dark"===e?s.jsx(n.Sun,{}):s.jsx(n.Moon,{})})})]})})]})},Vt={navItems:[{id:"btsearch",label:"Search",path:"/btsearch",search:{},icon:n.Search},{id:"add",label:"Add",path:"/downloader/torrents",search:{},icon:n.Link,matchPaths:["/downloader/torrents","/downloader/links"]},{id:"torrents",label:"Torrents",path:"/torrents",search:{},icon:n.TorrentOutline,matchPaths:["/torrents"],viewMatch:{path:"/view",type:"torrents"}},{id:"downloads",label:"Downloads",path:"/downloads",search:{},icon:n.Download,matchPaths:["/downloads"],viewMatch:{path:"/view",type:"downloads"}}]},Et=()=>{const e=P(),t=$(),a=T(),n=U({strict:!1}),o=((e,t,r)=>{for(const s of e){const e=(s.matchPaths??[s.path]).some(e=>t.startsWith(e));if(s.viewMatch&&t===s.viewMatch.path&&r===s.viewMatch.type)return s.id;if(e)return s.id}return e[0]?.id??"add"})(Vt.navItems,e.pathname,(e=>{if("torrents"===e||"downloads"===e)return e})(n.type));r.useEffect(()=>{a.preloadRoute({to:"/view",search:{type:"torrents",page:1}}),a.preloadRoute({to:"/view",search:{type:"downloads",page:1}})},[a]);return s.jsx("div",{className:i("fixed bottom-0 left-0 md:absolute md:top-20 z-50","w-full h-16 md:w-64 md:h-auto"),children:s.jsx(re,{selectedKey:o,onSelectionChange:e=>{const r=String(e),s=Vt.navItems.find(e=>e.id===r);s&&t({to:s.path,search:s.search})},variant:"light",size:"lg",classNames:{base:i("w-full md:w-64 bg-default-50/80 backdrop-blur-md","md:bg-transparent md:backdrop-blur-none"),tabList:i("flex md:flex-col gap-0 w-full h-16 md:h-auto","bg-default-50/80 backdrop-blur-md rounded-none md:rounded-medium","md:bg-default-50/50 md:p-2","mx-2 mb-2 md:mx-0 md:mb-0"),tab:i("flex-1 md:flex-none md:w-full h-16 md:h-14","flex items-center justify-center md:justify-start","px-2 md:px-4 md:py-3","text-xs md:text-sm"),tabContent:i("flex flex-col md:flex-row items-center gap-1 md:gap-3","group-data-[selected=true]:text-primary")},children:Vt.navItems.map(e=>s.jsx(se,{title:s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-1 md:gap-3",children:[s.jsx("div",{className:"md:w-6 md:h-6 flex items-center justify-center",children:s.jsx(e.icon,{className:"w-5 h-5 md:w-6 md:h-6"})}),s.jsx("span",{className:"font-medium",children:e.label})]})},e.id))})})},Ft=B("/_authed")({component:function(){const e=o(e=>e.open);return r.useEffect(()=>{(async()=>{try{500===(await fetch("/api/debrid/user")).status&&It("toast:missing-token",12)&&_t.error("Worker is missing DEBRID_TOKEN. Add the secret and redeploy.",{duration:7e3,id:"missing-debrid-token"})}catch{It("toast:api-unreachable",6)&&_t.error("Unable to reach worker API. Check deployment and network.",{duration:5e3,id:"api-unreachable"})}const e=!["localhost","127.0.0.1"].includes(window.location.hostname),t=document.cookie.includes("CF_Authorization"),r="https:"===window.location.protocol;e&&r&&!t&&It("toast:security-reminder",24)&&_t("Enable Cloudflare Access or HTTP Basic Auth for public deployments.",{duration:6e3,id:"security-reminder"})})()},[]),s.jsx("div",{className:"flex min-h-screen overflow-hidden",children:s.jsxs("div",{className:"relative z-0 flex-1",children:[s.jsx(Dt,{}),s.jsx(Et,{}),s.jsx("main",{className:"absolute left-0 right-0 md:bottom-0 md:left-64 bottom-20 top-0 md:top-16 max-w-screen-xl mx-auto overflow-y-auto p-4",children:s.jsx(L,{})}),e?s.jsx(r.Suspense,{fallback:null,children:s.jsx(Ot,{})}):null]})})}}),Ot=r.lazy(()=>ae(()=>import("./file-select-modal-BYgoe6ls.js").then(e=>e.M),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.FileSelectModal}))),It=(e,t)=>{const r=Date.now();return!(r-Number(localStorage.getItem(e)??0)<60*t*60*1e3)&&(localStorage.setItem(e,String(r)),!0)};const Lt=B("/_authed/")({component:()=>s.jsx(z,{from:"/",to:"/btsearch",replace:!0})}),Mt=B("/watch/$")({meta:({params:e})=>[{title:e._splat?.split("/").pop()}]}),Rt=e=>"all"===e?"all":new Set(Array.from(e).map(e=>(e=>String(e))(e))),Pt=(e,t)=>{if("all"===e)return new Set;const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r},$t=[{key:"original",label:"Open Link",icon:s.jsx(n.ExternalLink,{})},{key:"play",label:"Play",icon:s.jsx(n.Play,{})},{key:"vlc",label:"Open",icon:s.jsx(n.Vlc,{})},{key:"download",label:"Download",icon:s.jsx(n.Download,{})},{key:"copy",label:"Copy Link",icon:s.jsx(n.Copy,{})},{key:"delete",label:"Delete",icon:s.jsx(n.Delete,{})}],Tt=()=>{const{open:e,cords:t}=l(e=>e.dropdown),a=l(e=>e.actions),n=l(e=>e.currentDebridItem),i=p("downloads",[n.id]),o=$(),c=r.useCallback(e=>{"delete"===e?i.mutate():"original"===e?h(n.link):"play"===e?o({to:"/watch/$",params:{_splat:n.download.replace("https://","")}}):"download"===e?h(n.download,!1):"copy"===e?_t.promise(y(n.download),{loading:"",success:"Link copied",error:"Failed to copy"},{error:{duration:2e3}}):"vlc"===e&&h(`vlc://${n.download}`)},[n,i,o]);return s.jsxs(g,{isOpen:e,onOpenChange:a.closeDropdown,children:[s.jsx(oe,{children:s.jsx("button",{type:"button",className:"fixed",style:{top:t.y,left:t.x},tabIndex:-1,"aria-hidden":"true"})}),s.jsx(b,{"aria-label":"Options",onAction:c,items:n.streamable?$t:$t.filter(e=>"play"!==e.key&&"vlc"!==e.key),children:e=>s.jsx(le,{startContent:e.icon,children:e.label},e.key)})]})};function Ut({items:e,selectedIds:t,setSelectedIds:o,selectMode:p}){const{open:h,actions:y}=l(c(e=>({open:e.dropdown.open,actions:e.actions}))),g=r.useCallback((e,t)=>{y.setCurrentDebridItem(t),y.openDropdown(),y.setDropdownCords({x:e.clientX,y:e.clientY})},[y]);return s.jsxs(s.Fragment,{children:[h&&s.jsx(Tt,{}),s.jsx(d,{items:e,emptyMessage:"No downloads found",selectionMode:p?"multiple":"single",selectionBehavior:"toggle",dependencies:[p],selectedKeys:t,onSelectionChange:e=>o(Rt(e)),children:e=>s.jsx(u,{className:i("rounded-3xl data-[selected=true]:bg-white/5 data-[hovered=true]:bg-white/5 p-2",ie),textValue:e.filename,children:({isSelected:t})=>s.jsxs("div",{className:"grid gap-x-4 gap-y-1 md:gap-y-0 cursor-pointer grid-cols-6 rounded-3xl p-2",children:[s.jsxs("div",{className:"col-start-1 col-span-6 sm:col-span-5 flex gap-2",children:[s.jsx("div",{title:e.host,className:"flex-shrink-0 size-6 p-1 bg-primary rounded-full",children:s.jsx("img",{alt:"hoster",src:e.host_icon,loading:"lazy"})}),s.jsx("p",{title:e.filename,className:"text-base truncate",children:e.filename})]}),s.jsxs("div",{className:"flex ml-auto col-start-6 col-end-6 order-2 sm:order-none",children:[s.jsx(ne,{isSelected:t,size:"lg",classNames:{base:"m-0",wrapper:"before:rounded-full after:rounded-full mr-0"},icon:s.jsx(n.CheckCircle,{}),"aria-label":`Select ${e.filename}`,onChange:()=>o(t=>Pt(t,e.id))}),s.jsx(a,{disableRipple:!0,variant:"light",title:"Options",isIconOnly:!0,"aria-label":`Open actions for ${e.filename}`,onClick:t=>g(t,e),className:"data-[hover=true]:bg-transparent",children:s.jsx(n.Dots,{})})]}),s.jsxs("div",{className:"items-center flex col-start-1 col-span-5",children:[s.jsx("p",{className:"text-sm text-zinc-400 min-w-20",children:f(e.filesize)}),s.jsx("p",{className:"text-sm text-zinc-400",children:m(e.generated)})]})]})},e.id)})]})}const Bt=[{key:"view",label:"View",icon:s.jsx(n.Eye,{})},{key:"unrestict",label:"Unrestict",icon:s.jsx(n.DownloadDashed,{})},{key:"copy",label:"Copy",icon:s.jsx(n.Copy,{})},{key:"delete",label:"Delete",icon:s.jsx(n.Delete,{})}],zt=()=>{const{open:e,cords:t,item:a,actions:n}=l(c(e=>({open:e.dropdown.open,cords:e.dropdown.cords,item:e.currentDebridItem,actions:e.actions}))),i=o(e=>e.actions),d=p("torrents",[a.id]),u=$(),f=r.useCallback(async e=>{"delete"===e?d.mutate():"copy"===e?_t.promise(y(a.links.length>0?a.links.join("\n"):""),{loading:"",success:"Links copied",error:"Failed to copy"},{error:{duration:2e3}}):"view"===e?(i.setCurrentItem(a),i.setOpen(!0)):"unrestict"===e&&u({to:"/downloader/$tabId",search:{fileId:a.id},params:{tabId:"links"}})},[a,i,d,u]);return s.jsxs(g,{isOpen:e,onOpenChange:n.closeDropdown,children:[s.jsx(oe,{children:s.jsx("button",{type:"button",className:"fixed",style:{top:t.y,left:t.x},tabIndex:-1,"aria-hidden":"true"})}),s.jsx(b,{"aria-label":"Options",onAction:f,items:Bt,children:e=>s.jsx(le,{startContent:e.icon,children:e.label},e.key)})]})};function Ht({items:e,selectedIds:t,setSelectedIds:o,selectMode:p}){const{open:h,actions:y}=l(c(e=>({open:e.dropdown.open,actions:e.actions}))),g=r.useCallback((e,t)=>{y.setCurrentDebridItem(t),y.openDropdown(),y.setDropdownCords({x:e.clientX,y:e.clientY})},[y]);return s.jsxs(s.Fragment,{children:[h&&s.jsx(zt,{}),s.jsx(d,{items:e,emptyMessage:"No torrents found",selectionMode:p?"multiple":"single",selectionBehavior:"toggle",dependencies:[p],selectedKeys:t,onSelectionChange:e=>o(Rt(e)),children:e=>s.jsx(u,{className:i("rounded-3xl data-[selected=true]:bg-white/5 data-[hovered=true]:bg-white/5 p-2",ie),textValue:e.filename,children:({isSelected:t})=>s.jsxs("div",{className:"grid gap-x-4 gap-y-1 md:gap-y-0 cursor-pointer grid-cols-6 rounded-3xl p-2",children:[s.jsx("div",{className:"col-start-1 col-span-6 sm:col-span-4",children:s.jsx("p",{title:e.filename,className:"text-base truncate",children:e.filename})}),s.jsxs("div",{className:"flex ml-auto col-start-4 sm:col-start-5 col-span-full order-2 sm:order-none gap-2",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:["downloading"===e.status&&s.jsx(n.AnimatedDownload,{}),"uploading"===e.status&&s.jsx(n.AnimatedUpload,{}),"downloaded"===e.status&&s.jsx(n.CheckCircle,{className:"text-success"}),"error"===e.status&&s.jsx(n.Exclamation,{className:"text-danger"}),"waiting_files_selection"===e.status&&s.jsx(n.SelectWait,{}),s.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[s.jsxs("p",{className:"text-bold text-sm truncate capitalize",children:[e.progress,"%"]}),"downloading"===e.status&&s.jsxs("p",{className:"text-bold text-sm truncate",children:[x(e.speed||0),"/s"]})]})]}),s.jsx(ne,{isSelected:t,size:"lg",classNames:{base:"m-0",wrapper:"before:rounded-full after:rounded-full mr-0"},icon:s.jsx(n.CheckCircle,{}),"aria-label":`Select ${e.filename}`,onChange:()=>o(t=>Pt(t,e.id))}),s.jsx(a,{disableRipple:!0,variant:"light",title:"Options",isIconOnly:!0,"aria-label":`Open actions for ${e.filename}`,onClick:t=>g(t,e),className:"data-[hover=true]:bg-transparent",children:s.jsx(n.Dots,{})})]}),s.jsxs("div",{className:"items-center flex col-start-1 col-span-3 sm:col-span-4",children:[s.jsx("p",{className:"text-sm text-zinc-400 min-w-20",children:f(e.bytes)}),s.jsx("p",{className:"text-sm text-zinc-400",children:m(e.added)})]})]})},e.id)})]})}function qt(e){return{lang:e?.lang??undefined,message:e?.message,abortEarly:e?.abortEarly??undefined,abortPipeEarly:e?.abortPipeEarly??undefined}}function Kt(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function Wt(e,t,r,s,a){const n=r.value,i=e.expects??null,o=Kt(n),l={kind:e.kind,type:e.type,input:n,expected:i,received:o,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${o}`,requirement:e.requirement,path:a?.path,issues:a?.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},c="schema"===e.kind,d=e.message??(e.reference,void l.lang)??(c?void l.lang:null)??s.message??void l.lang;d&&(l.message="function"==typeof d?d(l):d),c&&(r.typed=!1),r.issues?r.issues.push(l):r.issues=[l]}function Qt(e,t){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}var Gt=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Xt(e){return{kind:"transformation",type:"transform",reference:Xt,async:!1,operation:e,"~validate"(e){return e.value=this.operation(e.value),e}}}function Yt(e,t,r){return"function"==typeof e.fallback?e.fallback(t,r):e.fallback}function Jt(e,t){return{...e,fallback:t,"~validate"(t,r=qt()){const s=e["~validate"](t,r);return s.issues?{typed:!0,value:Yt(this,s,r)}:s}}}function Zt(e){return{kind:"schema",type:"number",reference:Zt,expects:"number",async:!1,message:e,"~standard":1,"~vendor":"valibot","~validate"(e,t=qt()){return"number"!=typeof e.value||isNaN(e.value)?Wt(this,"type",e,t):e.typed=!0,e}}}function er(e,t){return{kind:"schema",type:"object",reference:er,expects:"Object",async:!1,entries:e,message:t,"~standard":1,"~vendor":"valibot","~validate"(e,t=qt()){const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const s in this.entries){const a=r[s],n=this.entries[s]["~validate"]({value:a},t);if(n.issues){const i={type:"object",origin:"value",input:r,key:s,value:a};for(const t of n.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=n.issues),t.abortEarly){e.typed=!1;break}}n.typed||(e.typed=!1),(void 0!==n.value||s in r)&&(e.value[s]=n.value)}}else Wt(this,"type",e,t);return e}}}function tr(e,t){return{kind:"schema",type:"optional",reference:tr,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,"~standard":1,"~vendor":"valibot","~validate"(e,t=qt()){return void 0===e.value&&(void 0!==this.default&&(e.value=function(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~validate"](e,t)}}}function rr(e,t){return{kind:"schema",type:"picklist",reference:rr,expects:Qt(e.map(Kt),"|"),async:!1,options:e,message:t,"~standard":1,"~vendor":"valibot","~validate"(e,t=qt()){return this.options.includes(e.value)?e.typed=!0:Wt(this,"type",e,t),e}}}function sr(e){return{kind:"schema",type:"string",reference:sr,expects:"string",async:!1,message:e,"~standard":1,"~vendor":"valibot","~validate"(e,t=qt()){return"string"==typeof e.value?e.typed=!0:Wt(this,"type",e,t),e}}}function ar(...e){return{...e[0],pipe:e,"~validate"(t,r=qt()){for(const s of e)if("metadata"!==s.kind){if(t.issues&&("schema"===s.kind||"transformation"===s.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=s["~validate"](t,r))}return t}}}er({redirect:tr(sr())});const nr=er({page:Jt(ar(Zt(),Xt(Number)),1),limit:tr(Jt(ar(Zt(),Xt(Number)),50)),type:Jt(rr(["torrents","downloads"]),"torrents")}),ir=er({q:tr(sr()),orderBy:tr(Jt(rr(["time","size","seeders","relevance"]),"relevance")),category:tr(Jt(rr(["all","movie","audio","doc","app","other"]),"all")),page:tr(Jt(ar(Zt(),Xt(Number)),1))}),or=e=>({types:{input:null,output:null},parse:t=>function(e,t,r){const s=e["~validate"]({value:t},qt(r));if(s.issues)throw new Gt(s.issues);return s.value}(e,t)}),lr=B("/_authed/view")({component:function(){const e=U({from:"/_authed/view"}),{data:{items:t,totalPages:i}}=H(v(e)),o=$(),l=r.useCallback((t,r=!1)=>o({to:"/view",search:{page:t,type:e.type},replace:r,resetScroll:!0}),[o,e.type]),c=!0,[d,u]=r.useState(new Set),f=r.useMemo(()=>t.map(e=>e.id),[t]),m=r.useMemo(()=>{return t=f,"all"===(e=d)?t:Array.from(e);var e,t},[d,f]),h=r.useCallback(async()=>{i>1&&e.page===i&&t.length>0&&m.length===t.length&&await l(e.page-1,!0)},[l,m.length,t.length,e.page,i]);r.useEffect(()=>{u(new Set)},[e.type,e.page]);const y=p(e.type,m,h),g=r.useCallback(()=>{y.mutateAsync().finally(()=>u(new Set))},[y]),b=w.useMemo(()=>s.jsxs("div",{className:"flex flex-wrap gap-3 px-2",children:[i>1&&s.jsx(j,{page:e.page,total:i,onChange:l}),s.jsxs(a,{title:"Select All",variant:"flat",onPress:()=>u(e=>"all"===e?new Set:"all"),className:"flex items-center gap-2",children:[s.jsx(n.SelectAll,{}),s.jsx("span",{className:"hidden md:inline",children:"Select All"})]}),s.jsxs(a,{isLoading:y.isPending,title:"Delete",variant:"flat",onPress:g,className:"flex items-center gap-2",children:[s.jsx(n.Delete,{}),s.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]}),[y.isPending,l,g,e.page,i]),x="downloads"===e.type;return s.jsxs("div",{className:"size-full grid gap-2 grid-rows-[auto_1fr]",children:[b,x?s.jsx(Ut,{selectMode:c,selectedIds:d,setSelectedIds:u,items:t}):s.jsx(Ht,{selectMode:c,selectedIds:d,setSelectedIds:u,items:t})]})},validateSearch:or(nr),loaderDeps:({search:e})=>({search:e}),meta:({match:e})=>[{title:k(e.search.type)}],wrapInSuspense:!0,loader:async({context:{queryClient:e},deps:{search:t}})=>await e.ensureQueryData(v(t))}),cr=B("/_authed/torrents")({beforeLoad:()=>{throw q({to:"/view",search:{type:"torrents",page:1}})}}),dr=B("/_authed/downloads")({beforeLoad:()=>{throw q({to:"/view",search:{type:"downloads",page:1}})}}),ur=({value:e,...t})=>{const{copy:r,copied:a}=ce();return s.jsxs(de,{isIconOnly:!0,"aria-label":t["aria-label"]??"Copy to clipboard",className:"z-50 border-1 border-transparent bg-transparent  before:content-[''] before:block before:z-[-1] before:absolute before:inset-0 before:backdrop-blur-md before:backdrop-saturate-100 before:rounded-lg",size:"sm",variant:"bordered",onPress:()=>r(e),...t,children:[s.jsx(n.CopySuccess,{className:"absolute size-6 opacity-0 scale-50  data-[visible=true]:opacity-100 data-[visible=true]:scale-100 transition-transform-opacity","data-visible":a}),s.jsx(n.Copy,{className:"absolute size-6 opacity-0 scale-50  data-[visible=true]:opacity-100 data-[visible=true]:scale-100 transition-transform-opacity","data-visible":!a})]})},fr={links:"Unrestrict Links",torrents:"Add Torrents"},mr=e=>{switch(e){case"links":return s.jsx(n.Link,{});case"torrents":return s.jsx(n.BitTorrent,{})}},pr=K("/_authed/downloader/$tabId"),hr=r.memo(({item:e})=>s.jsx(ue,{className:"w-full",children:s.jsxs(fe,{className:"flex flex-row items-center gap-3 p-3",children:[s.jsx(me,{title:e.host,src:e.host_icon,size:"sm"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"font-medium text-sm truncate",children:e.error?e.link:e.filename})}),s.jsxs("div",{className:"flex items-center gap-2",children:[e.error?s.jsx(pe,{content:e.error.replaceAll("_"," "),color:"danger",children:s.jsx(de,{isIconOnly:!0,variant:"light",color:"danger","aria-label":"View link error",children:s.jsx(n.Exclamation,{})})}):s.jsx(n.CheckCircle,{className:"text-success"}),s.jsx(de,{variant:"solid",color:"primary",as:"a",isIconOnly:!0,isDisabled:!!e.error||0===e.streamable,href:e.download,rel:"noopener noreferrer","aria-label":"Download file",children:s.jsx(n.DownloadDashed,{})})]})]})})),yr=B("/_authed/downloader")({component:()=>{const e=pr.useParams().tabId,t=pr.useNavigate(),a=l(e=>e.unRestrictedFiles),n=r.useMemo(()=>a.filter(e=>e.download).map(e=>e.download).join("\n"),[a]);return s.jsxs("div",{className:"flex flex-col gap-4 max-w-2xl mx-auto",children:[s.jsxs(ue,{children:[s.jsx(he,{children:s.jsx("h1",{className:"text-xl font-bold",children:fr[e]})}),s.jsx(fe,{children:s.jsx(re,{color:"primary",selectedKey:e,onSelectionChange:e=>t({params:{tabId:e}}),children:["torrents","links"].map(e=>s.jsx(se,{title:s.jsxs("div",{className:"flex items-center space-x-2",children:[mr(e),s.jsx("span",{className:"capitalize",children:e})]}),children:s.jsx("div",{className:"mt-4",children:s.jsx(L,{})})},e))})})]}),a.length>0&&s.jsxs(ue,{children:[s.jsxs(he,{className:"flex justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Download Links"}),s.jsx(ur,{value:n,title:"Copy Links"})]}),s.jsx(fe,{className:"flex flex-col gap-3 max-h-96 overflow-y-auto",children:a.map(e=>s.jsx(hr,{item:e},e.id))})]})]})}}),gr=[{key:"link",label:"Open Link",icon:s.jsx(n.ExternalLink,{})},{key:"add",label:"Add Torrent",icon:s.jsx(n.CirclePlus,{})},{key:"copy",label:"Copy Magnet",icon:s.jsx(n.Copy,{})},{key:"magnet",label:"Open Magnet",icon:s.jsx(n.TorrentOutline,{})}],br=()=>{const{open:e,cords:t}=l(e=>e.dropdown),{closeDropdown:a}=l(e=>e.actions),n=l(e=>e.currentDebridItem),i=o(e=>e.actions),c=r.useCallback(async e=>{"add"===e?We.promise((async()=>{const e=await A.postForm("/debrid/torrents/addMagnet",{magnet:n.magnet}),t=await C().ensureQueryData(N(e.data.id));i.setCurrentItem(t),i.setOpen(!0)})(),{loading:"Adding torrent",success:"Torrent added",error:"Failed to add torrent"},{error:{duration:2e3}}):"copy"===e?We.promise(y(n.magnet),{loading:"",success:"Link copied",error:"Failed to copy"},{error:{duration:2e3}}):"link"===e?h(n.link):"magnet"===e&&h(n.magnet)},[i,n]);return s.jsxs(g,{isOpen:e,onOpenChange:a,children:[s.jsx(oe,{children:s.jsx("button",{type:"button",className:"fixed",style:{top:t.y,left:t.x},tabIndex:-1,"aria-hidden":"true"})}),s.jsx(b,{"aria-label":"Options",onAction:c,items:gr,children:e=>s.jsx(le,{startContent:e.icon,children:e.label},e.key)})]})};function xr(){const e=U({from:"/_authed/btsearch"}),{data:t}=H(_(e)),i=l(e=>e.actions),o=r.useCallback((e,t)=>{e.stopPropagation(),i.openDropdown(),i.setDropdownCords({x:e.clientX,y:e.clientY}),i.setCurrentDebridItem(t)},[i]),c=$(),d=r.useCallback(e=>c({to:"/btsearch",search:t=>({...t,page:e}),resetScroll:!0}),[c]);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex",children:t.torrents.length>0&&s.jsx(j,{page:t.meta.page,total:t.meta.pages,onChange:d})}),!e.q&&null,!!e.q&&s.jsxs(s.Fragment,{children:[s.jsx(br,{}),s.jsx(ye,{classNames:{base:"overflow-auto",list:"gap-4 px-2"},items:t.torrents,selectionMode:"none",emptyContent:s.jsx(S,{message:"No torrents found"}),children:e=>s.jsx(ge,{classNames:{base:"rounded-3xl data-[hover=true]:bg-white/5"},textValue:e.title,children:s.jsxs("div",{className:"grid gap-x-4 gap-y-1 md:gap-y-0 cursor-pointer grid-cols-6 rounded-3xl p-2",children:[s.jsx("div",{className:"col-start-1 col-span-6 sm:col-span-5",children:s.jsx("p",{title:e.title,className:"text-base truncate",children:e.title})}),s.jsx("div",{className:"flex ml-auto col-start-6 col-end-6 order-2 sm:order-none",children:s.jsx(a,{disableRipple:!0,variant:"light",title:"Options",isIconOnly:!0,"aria-label":`Open actions for ${e.title}`,onClick:t=>o(t,e),className:"data-[hover=true]:bg-transparent",children:s.jsx(n.Dots,{})})}),s.jsxs("div",{className:"items-center flex col-start-1 col-span-5",children:[s.jsx("p",{className:"text-sm text-zinc-400 min-w-20",children:e.size}),s.jsx("p",{className:"text-sm text-zinc-400",children:m(e.createdAt)})]})]})},e.magnet)})]})]})}const vr=r.lazy(()=>ae(()=>import("./real-debrid-account-info-yGCQGTtv.js"),__vite__mapDeps([6,0,1,2,3,4,5])).then(e=>({default:e.RealDebridAccountInfo}))),wr=B("/_authed/btsearch")({component:function(){const{q:e}=wr.useSearch();return s.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] gap-4 size-full",children:[s.jsxs("div",{className:"flex gap-4 px-2 w-full md:w-1/2 mx-auto",children:[s.jsx(jr,{}),s.jsx(Ar,{}),s.jsx(Cr,{})]}),s.jsx(xr,{}),!e&&s.jsx("div",{className:"flex justify-center px-4 pb-4 mt-auto",children:s.jsx(r.Suspense,{fallback:s.jsx(D,{label:"Loading account info"}),children:s.jsx(vr,{})})})]})},validateSearch:or(ir),loaderDeps:({search:e})=>e,meta:({match:e})=>[{title:e.search.q}],wrapInSuspense:!0,loader:async({context:{queryClient:e},deps:t})=>{await e.ensureQueryData(_(t))}}),jr=()=>{const{q:e}=wr.useSearch(),t=$(),[a,n]=r.useState(e||"");W({queryKey:["btsearch"]});const i=r.useRef(null);r.useEffect(()=>{i.current&&i.current.focus()},[]);const o=r.useCallback(e=>{e.preventDefault(),t({to:"/btsearch",search:e=>({...e,q:a,page:1})}),i.current&&i.current.blur()},[t,a]);return s.jsx("form",{onSubmit:o,className:"w-full",children:s.jsx(be,{ref:i,label:"Search",description:"BT4GPRX.COM API",type:"search",value:a,onChange:e=>n(e.target.value)})})},kr=[{value:"all",label:"All"},{value:"movie",label:"Movie"},{value:"audio",label:"Audio"},{value:"doc",label:"Document"},{value:"app",label:"Application"},{value:"other",label:"Other"}],_r=[{value:"time",label:"CreatedAt"},{value:"size",label:"Size"},{value:"seeders",label:"Seeders"},{value:"relevance",label:"Relevance"}],Sr=(e,t)=>"all"===e?t:Array.from(e)[0]??t,Ar=()=>{const{category:e}=wr.useSearch(),[t,i]=r.useState(new Set([e||"all"])),o=$();r.useEffect(()=>{i(new Set([e||"all"]))},[e]);const l=r.useCallback(e=>{const t=Rt(e);i(t);const r=Sr(t,"all");o({to:"/btsearch",search:e=>({...e,category:r}),replace:!0})},[o]);return s.jsxs(g,{placement:"bottom-end",children:[s.jsx(oe,{children:s.jsx(a,{title:"Category",variant:"flat",className:"bg-white/5",isIconOnly:!0,"aria-label":"Choose category",children:s.jsx(n.Catergory,{})})}),s.jsx(b,{"aria-label":"Category",disallowEmptySelection:!0,selectionMode:"single",items:kr,selectedKeys:t,onSelectionChange:l,children:e=>s.jsx(le,{className:"capitalize",children:e.label},e.value)})]})},Cr=()=>{const{orderBy:e}=wr.useSearch(),[t,i]=r.useState(new Set([e||"relevance"])),o=$();r.useEffect(()=>{i(new Set([e||"relevance"]))},[e]);const l=r.useCallback(e=>{const t=Rt(e);i(t);const r=Sr(t,"relevance");o({to:"/btsearch",search:e=>({...e,orderBy:r}),replace:!0})},[o]);return s.jsxs(g,{placement:"bottom-end",children:[s.jsx(oe,{children:s.jsx(a,{title:"Order By",variant:"flat",className:"bg-white/5",isIconOnly:!0,"aria-label":"Choose sort order",children:s.jsx(n.Sort,{})})}),s.jsx(b,{"aria-label":"Order By",disallowEmptySelection:!0,selectionMode:"single",items:_r,selectedKeys:t,onSelectionChange:l,children:e=>s.jsx(le,{className:"capitalize",children:e.label},e.value)})]})};var Nr=e=>"checkbox"===e.type,Dr=e=>e instanceof Date,Vr=e=>null==e;const Er=e=>"object"==typeof e;var Fr=e=>!Vr(e)&&!Array.isArray(e)&&Er(e)&&!Dr(e),Or=e=>Fr(e)&&e.target?Nr(e.target)?e.target.checked:e.target.value:e,Ir=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Lr="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function Mr(e){let t;const r=Array.isArray(e),s="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(Lr&&(e instanceof Blob||s)||!r&&!Fr(e))return e;if(t=r?[]:{},r||(e=>{const t=e.constructor&&e.constructor.prototype;return Fr(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=Mr(e[r]));else t=e}return t}var Rr=e=>/^\w*$/.test(e),Pr=e=>void 0===e,$r=e=>Array.isArray(e)?e.filter(Boolean):[],Tr=e=>$r(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ur=(e,t,r)=>{if(!t||!Fr(e))return r;const s=(Rr(t)?[t]:Tr(t)).reduce((e,t)=>Vr(e)?e:e[t],e);return Pr(s)||s===e?Pr(e[t])?r:e[t]:s},Br=e=>"boolean"==typeof e,zr=(e,t,r)=>{let s=-1;const a=Rr(t)?[t]:Tr(t),n=a.length,i=n-1;for(;++s<n;){const t=a[s];let n=r;if(s!==i){const r=e[t];n=Fr(r)||Array.isArray(r)?r:isNaN(+a[s+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=n,e=e[t]}};const Hr="blur",qr="focusout",Kr="change",Wr="onBlur",Qr="onChange",Gr="onSubmit",Xr="onTouched",Yr="all",Jr="max",Zr="min",es="maxLength",ts="minLength",rs="pattern",ss="required",as="validate",ns=w.createContext(null);ns.displayName="HookFormContext";const is=()=>w.useContext(ns);var os=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const n in e)Object.defineProperty(a,n,{get:()=>{const a=n;return t._proxyFormState[a]!==Yr&&(t._proxyFormState[a]=!s||Yr),r&&(r[a]=!0),e[a]}});return a};const ls="undefined"!=typeof window?w.useLayoutEffect:w.useEffect;var cs=e=>"string"==typeof e,ds=(e,t,r,s,a)=>cs(e)?(s&&t.watch.add(e),Ur(r,e,a)):Array.isArray(e)?e.map(e=>(s&&t.watch.add(e),Ur(r,e))):(s&&(t.watchAll=!0),r),us=e=>Vr(e)||!Er(e);function fs(e,t,r=new WeakSet){if(us(e)||us(t))return e===t;if(Dr(e)&&Dr(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const n of s){const s=e[n];if(!a.includes(n))return!1;if("ref"!==n){const e=t[n];if(Dr(s)&&Dr(e)||Fr(s)&&Fr(e)||Array.isArray(s)&&Array.isArray(e)?!fs(s,e,r):s!==e)return!1}}return!0}function ms(e){const t=is(),{control:r=t.control,name:s,defaultValue:a,disabled:n,exact:i,compute:o}=e||{},l=w.useRef(a),c=w.useRef(o),d=w.useRef(void 0);c.current=o;const u=w.useMemo(()=>r._getWatch(s,l.current),[r,s]),[f,m]=w.useState(c.current?c.current(u):u);return ls(()=>r._subscribe({name:s,formState:{values:!0},exact:i,callback:e=>{if(!n){const t=ds(s,r._names,e.values||r._formValues,!1,l.current);if(c.current){const e=c.current(t);fs(e,d.current)||(m(e),d.current=e)}else m(t)}}}),[r,n,s,i]),w.useEffect(()=>r._removeUnmounted()),f}function ps(e){const t=is(),{name:r,disabled:s,control:a=t.control,shouldUnregister:n,defaultValue:i}=e,o=Ir(a._names.array,r),l=w.useMemo(()=>Ur(a._formValues,r,Ur(a._defaultValues,r,i)),[a,r,i]),c=ms({control:a,name:r,defaultValue:l,exact:!0}),d=function(e){const t=is(),{control:r=t.control,disabled:s,name:a,exact:n}=e||{},[i,o]=w.useState(r._formState),l=w.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return ls(()=>r._subscribe({name:a,formState:l.current,exact:n,callback:e=>{!s&&o({...r._formState,...e})}}),[a,s,n]),w.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),w.useMemo(()=>os(i,r,l.current,!1),[i,r])}({control:a,name:r,exact:!0}),u=w.useRef(e),f=w.useRef(a.register(r,{...e.rules,value:c,...Br(e.disabled)?{disabled:e.disabled}:{}}));u.current=e;const m=w.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ur(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ur(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ur(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ur(d.validatingFields,r)},error:{enumerable:!0,get:()=>Ur(d.errors,r)}}),[d,r]),p=w.useCallback(e=>f.current.onChange({target:{value:Or(e),name:r},type:Kr}),[r]),h=w.useCallback(()=>f.current.onBlur({target:{value:Ur(a._formValues,r),name:r},type:Hr}),[r,a._formValues]),y=w.useCallback(e=>{const t=Ur(a._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus&&e.focus(),select:()=>e.select&&e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[a._fields,r]),g=w.useMemo(()=>({name:r,value:c,...Br(s)||d.disabled?{disabled:d.disabled||s}:{},onChange:p,onBlur:h,ref:y}),[r,s,d.disabled,p,h,y,c]);return w.useEffect(()=>{const e=a._options.shouldUnregister||n;a.register(r,{...u.current.rules,...Br(u.current.disabled)?{disabled:u.current.disabled}:{}});const t=(e,t)=>{const r=Ur(a._fields,e);r&&r._f&&(r._f.mount=t)};if(t(r,!0),e){const e=Mr(Ur(a._options.defaultValues,r));zr(a._defaultValues,r,e),Pr(Ur(a._formValues,r))&&zr(a._formValues,r,e)}return!o&&a.register(r),()=>{(o?e&&!a._state.action:e)?a.unregister(r):t(r,!1)}},[r,a,o,n]),w.useEffect(()=>{a._setDisabledField({disabled:s,name:r})},[s,r,a]),w.useMemo(()=>({field:g,formState:d,fieldState:m}),[g,d,m])}const hs=e=>e.render(ps(e));var ys=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},gs=e=>Array.isArray(e)?e:[e],bs=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},xs=e=>Fr(e)&&!Object.keys(e).length,vs=e=>"file"===e.type,ws=e=>"function"==typeof e,js=e=>{if(!Lr)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ks=e=>"select-multiple"===e.type,_s=e=>"radio"===e.type,Ss=e=>js(e)&&e.isConnected;function As(e,t){const r=Array.isArray(t)?t:Rr(t)?[t]:Tr(t),s=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=Pr(e)?s++:e[t[s++]];return e}(e,r),a=r.length-1,n=r[a];return s&&delete s[n],0!==a&&(Fr(s)&&xs(s)||Array.isArray(s)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Pr(e[t]))return!1;return!0}(s))&&As(e,r.slice(0,-1)),e}var Cs=e=>{for(const t in e)if(ws(e[t]))return!0;return!1};function Ns(e,t={}){const r=Array.isArray(e);if(Fr(e)||r)for(const s in e)Array.isArray(e[s])||Fr(e[s])&&!Cs(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Ns(e[s],t[s])):Vr(e[s])||(t[s]=!0);return t}function Ds(e,t,r){const s=Array.isArray(e);if(Fr(e)||s)for(const a in e)Array.isArray(e[a])||Fr(e[a])&&!Cs(e[a])?Pr(t)||us(r[a])?r[a]=Array.isArray(e[a])?Ns(e[a],[]):{...Ns(e[a])}:Ds(e[a],Vr(t)?{}:t[a],r[a]):r[a]=!fs(e[a],t[a]);return r}var Vs=(e,t)=>Ds(e,t,Ns(t));const Es={value:!1,isValid:!1},Fs={value:!0,isValid:!0};var Os=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Pr(e[0].attributes.value)?Pr(e[0].value)||""===e[0].value?Fs:{value:e[0].value,isValid:!0}:Fs:Es}return Es},Is=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>Pr(e)?e:t?""===e?NaN:e?+e:e:r&&cs(e)?new Date(e):s?s(e):e;const Ls={isValid:!1,value:null};var Ms=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Ls):Ls;function Rs(e){const t=e.ref;return vs(t)?t.files:_s(t)?Ms(e.refs).value:ks(t)?[...t.selectedOptions].map(({value:e})=>e):Nr(t)?Os(e.refs).value:Is(Pr(t.value)?e.ref.value:t.value,e)}var Ps=e=>e instanceof RegExp,$s=e=>Pr(e)?e:Ps(e)?e.source:Fr(e)?Ps(e.value)?e.value.source:e.value:e,Ts=e=>({isOnSubmit:!e||e===Gr,isOnBlur:e===Wr,isOnChange:e===Qr,isOnAll:e===Yr,isOnTouch:e===Xr});const Us="AsyncFunction";var Bs=e=>!!e&&!!e.validate&&!!(ws(e.validate)&&e.validate.constructor.name===Us||Fr(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Us)),zs=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const Hs=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const r=Ur(e,a);if(r){const{_f:e,...n}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!s)return!0;if(e.ref&&t(e.ref,e.name)&&!s)return!0;if(Hs(n,t))break}else if(Fr(n)&&Hs(n,t))break}}};function qs(e,t,r){const s=Ur(e,r);if(s||Rr(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),n=Ur(t,s),i=Ur(e,s);if(n&&!Array.isArray(n)&&r!==s)return{name:r};if(i&&i.type)return{name:s,error:i};if(i&&i.root&&i.root.type)return{name:`${s}.root`,error:i.root};a.pop()}return{name:r}}var Ks=(e,t,r)=>{const s=gs(Ur(e,r));return zr(s,"root",t[r]),zr(e,r,s),e},Ws=e=>cs(e);function Qs(e,t,r="validate"){if(Ws(e)||Array.isArray(e)&&e.every(Ws)||Br(e)&&!e)return{type:r,message:Ws(e)?e:"",ref:t}}var Gs=e=>Fr(e)&&!Ps(e)?e:{value:e,message:""},Xs=async(e,t,r,s,a,n)=>{const{ref:i,refs:o,required:l,maxLength:c,minLength:d,min:u,max:f,pattern:m,validate:p,name:h,valueAsNumber:y,mount:g}=e._f,b=Ur(r,h);if(!g||t.has(h))return{};const x=o?o[0]:i,v=e=>{a&&x.reportValidity&&(x.setCustomValidity(Br(e)?"":e||""),x.reportValidity())},w={},j=_s(i),k=Nr(i),_=j||k,S=(y||vs(i))&&Pr(i.value)&&Pr(b)||js(i)&&""===i.value||""===b||Array.isArray(b)&&!b.length,A=ys.bind(null,h,s,w),C=(e,t,r,s=es,a=ts)=>{const n=e?t:r;w[h]={type:e?s:a,message:n,ref:i,...A(e?s:a,n)}};if(n?!Array.isArray(b)||!b.length:l&&(!_&&(S||Vr(b))||Br(b)&&!b||k&&!Os(o).isValid||j&&!Ms(o).isValid)){const{value:e,message:t}=Ws(l)?{value:!!l,message:l}:Gs(l);if(e&&(w[h]={type:ss,message:t,ref:x,...A(ss,t)},!s))return v(t),w}if(!(S||Vr(u)&&Vr(f))){let e,t;const r=Gs(f),a=Gs(u);if(Vr(b)||isNaN(b)){const s=i.valueAsDate||new Date(b),n=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;cs(r.value)&&b&&(e=o?n(b)>n(r.value):l?b>r.value:s>new Date(r.value)),cs(a.value)&&b&&(t=o?n(b)<n(a.value):l?b<a.value:s<new Date(a.value))}else{const s=i.valueAsNumber||(b?+b:b);Vr(r.value)||(e=s>r.value),Vr(a.value)||(t=s<a.value)}if((e||t)&&(C(!!e,r.message,a.message,Jr,Zr),!s))return v(w[h].message),w}if((c||d)&&!S&&(cs(b)||n&&Array.isArray(b))){const e=Gs(c),t=Gs(d),r=!Vr(e.value)&&b.length>+e.value,a=!Vr(t.value)&&b.length<+t.value;if((r||a)&&(C(r,e.message,t.message),!s))return v(w[h].message),w}if(m&&!S&&cs(b)){const{value:e,message:t}=Gs(m);if(Ps(e)&&!b.match(e)&&(w[h]={type:rs,message:t,ref:i,...A(rs,t)},!s))return v(t),w}if(p)if(ws(p)){const e=Qs(await p(b,r),x);if(e&&(w[h]={...e,...A(as,e.message)},!s))return v(e.message),w}else if(Fr(p)){let e={};for(const t in p){if(!xs(e)&&!s)break;const a=Qs(await p[t](b,r),x,t);a&&(e={...a,...A(t,a.message)},v(a.message),s&&(w[h]=e))}if(!xs(e)&&(w[h]={ref:x,...e},!s))return w}return v(!0),w};const Ys={mode:Gr,reValidateMode:Qr,shouldFocusError:!0};function Js(e={}){let t,r={...Ys,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:ws(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},n=(Fr(r.defaultValues)||Fr(r.values))&&Mr(r.defaultValues||r.values)||{},i=r.shouldUnregister?{}:Mr(n),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...d};const f={array:bs(),state:bs()},m=r.criteriaMode===Yr,p=async e=>{if(!r.disabled&&(d.isValid||u.isValid||e)){const e=r.resolver?xs((await x()).errors):await v(a,!0);e!==s.isValid&&f.state.next({isValid:e})}},h=(e,t)=>{!r.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?zr(s.validatingFields,e,t):As(s.validatingFields,e))}),f.state.next({validatingFields:s.validatingFields,isValidating:!xs(s.validatingFields)}))},y=(e,t,r,s)=>{const l=Ur(a,e);if(l){const a=Ur(i,e,Pr(r)?Ur(n,e):r);Pr(a)||s&&s.defaultChecked||t?zr(i,e,t?a:Rs(l._f)):k(e,a),o.mount&&p()}},g=(e,t,a,i,o)=>{let l=!1,c=!1;const m={name:e};if(!r.disabled){if(!a||i){(d.isDirty||u.isDirty)&&(c=s.isDirty,s.isDirty=m.isDirty=w(),l=c!==m.isDirty);const r=fs(Ur(n,e),t);c=!!Ur(s.dirtyFields,e),r?As(s.dirtyFields,e):zr(s.dirtyFields,e,!0),m.dirtyFields=s.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!r}if(a){const t=Ur(s.touchedFields,e);t||(zr(s.touchedFields,e,a),m.touchedFields=s.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==a)}l&&o&&f.state.next(m)}return l?m:{}},b=(e,a,n,i)=>{const o=Ur(s.errors,e),l=(d.isValid||u.isValid)&&Br(a)&&s.isValid!==a;var m;if(r.delayError&&n?(m=()=>((e,t)=>{zr(s.errors,e,t),f.state.next({errors:s.errors})})(e,n),t=e=>{clearTimeout(c),c=setTimeout(m,e)},t(r.delayError)):(clearTimeout(c),t=null,n?zr(s.errors,e,n):As(s.errors,e)),(n?!fs(o,n):o)||!xs(i)||l){const t={...i,...l&&Br(a)?{isValid:a}:{},errors:s.errors,name:e};s={...s,...t},f.state.next(t)}},x=async e=>{h(e,!0);const t=await r.resolver(i,r.context,((e,t,r,s)=>{const a={};for(const n of e){const e=Ur(t,n);e&&zr(a,n,e._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}})(e||l.mount,a,r.criteriaMode,r.shouldUseNativeValidation));return h(e),t},v=async(e,t,a={valid:!0})=>{for(const n in e){const o=e[n];if(o){const{_f:e,...c}=o;if(e){const c=l.array.has(e.name),u=o._f&&Bs(o._f);u&&d.validatingFields&&h([n],!0);const f=await Xs(o,l.disabled,i,m,r.shouldUseNativeValidation&&!t,c);if(u&&d.validatingFields&&h([n]),f[e.name]&&(a.valid=!1,t))break;!t&&(Ur(f,e.name)?c?Ks(s.errors,f,e.name):zr(s.errors,e.name,f[e.name]):As(s.errors,e.name))}!xs(c)&&await v(c,t,a)}}return a.valid},w=(e,t)=>!r.disabled&&(e&&t&&zr(i,e,t),!fs(D(),n)),j=(e,t,r)=>ds(e,l,{...o.mount?i:Pr(t)?n:cs(e)?{[e]:t}:t},r,t),k=(e,t,r={})=>{const s=Ur(a,e);let n=t;if(s){const r=s._f;r&&(!r.disabled&&zr(i,e,Is(t,r)),n=js(r.ref)&&Vr(t)?"":t,ks(r.ref)?[...r.ref.options].forEach(e=>e.selected=n.includes(e.value)):r.refs?Nr(r.ref)?r.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(n)?e.checked=!!n.find(t=>t===e.value):e.checked=n===e.value||!!n)}):r.refs.forEach(e=>e.checked=e.value===n):vs(r.ref)?r.ref.value="":(r.ref.value=n,r.ref.type||f.state.next({name:e,values:Mr(i)})))}(r.shouldDirty||r.shouldTouch)&&g(e,n,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&N(e)},_=(e,t,r)=>{for(const s in t){if(!t.hasOwnProperty(s))return;const n=t[s],i=e+"."+s,o=Ur(a,i);(l.array.has(e)||Fr(n)||o&&!o._f)&&!Dr(n)?_(i,n,r):k(i,n,r)}},S=(e,t,r={})=>{const c=Ur(a,e),m=l.array.has(e),p=Mr(t);zr(i,e,p),m?(f.array.next({name:e,values:Mr(i)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&r.shouldDirty&&f.state.next({name:e,dirtyFields:Vs(n,i),isDirty:w(e,p)})):!c||c._f||Vr(p)?k(e,p,r):_(e,p,r),zs(e,l)&&f.state.next({...s,name:e}),f.state.next({name:o.mount?e:void 0,values:Mr(i)})},A=async e=>{o.mount=!0;const n=e.target;let c=n.name,y=!0;const w=Ur(a,c),j=e=>{y=Number.isNaN(e)||Dr(e)&&isNaN(e.getTime())||fs(e,Ur(i,c,e))},k=Ts(r.mode),_=Ts(r.reValidateMode);if(w){let o,A;const C=n.type?Rs(w._f):Or(e),D=e.type===Hr||e.type===qr,V=!((S=w._f).mount&&(S.required||S.min||S.max||S.maxLength||S.minLength||S.pattern||S.validate)||r.resolver||Ur(s.errors,c)||w._f.deps)||((e,t,r,s,a)=>!a.isOnAll&&(!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:!(r?s.isOnChange:a.isOnChange)||e))(D,Ur(s.touchedFields,c),s.isSubmitted,_,k),E=zs(c,l,D);zr(i,c,C),D?(w._f.onBlur&&w._f.onBlur(e),t&&t(0)):w._f.onChange&&w._f.onChange(e);const F=g(c,C,D),O=!xs(F)||E;if(!D&&f.state.next({name:c,type:e.type,values:Mr(i)}),V)return(d.isValid||u.isValid)&&("onBlur"===r.mode?D&&p():D||p()),O&&f.state.next({name:c,...E?{}:F});if(!D&&E&&f.state.next({...s}),r.resolver){const{errors:e}=await x([c]);if(j(C),y){const t=qs(s.errors,a,c),r=qs(e,a,t.name||c);o=r.error,c=r.name,A=xs(e)}}else h([c],!0),o=(await Xs(w,l.disabled,i,m,r.shouldUseNativeValidation))[c],h([c]),j(C),y&&(o?A=!1:(d.isValid||u.isValid)&&(A=await v(a,!0)));y&&(w._f.deps&&N(w._f.deps),b(c,A,o,F))}var S},C=(e,t)=>{if(Ur(s.errors,t)&&e.focus)return e.focus(),1},N=async(e,t={})=>{let n,i;const o=gs(e);if(r.resolver){const t=await(async e=>{const{errors:t}=await x(e);if(e)for(const r of e){const e=Ur(t,r);e?zr(s.errors,r,e):As(s.errors,r)}else s.errors=t;return t})(Pr(e)?e:o);n=xs(t),i=e?!o.some(e=>Ur(t,e)):n}else e?(i=(await Promise.all(o.map(async e=>{const t=Ur(a,e);return await v(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||s.isValid)&&p()):i=n=await v(a);return f.state.next({...!cs(e)||(d.isValid||u.isValid)&&n!==s.isValid?{}:{name:e},...r.resolver||!e?{isValid:n}:{},errors:s.errors}),t.shouldFocus&&!i&&Hs(a,C,e?o:l.mount),i},D=e=>{const t={...o.mount?i:n};return Pr(e)?t:cs(e)?Ur(t,e):e.map(e=>Ur(t,e))},V=(e,t)=>({invalid:!!Ur((t||s).errors,e),isDirty:!!Ur((t||s).dirtyFields,e),error:Ur((t||s).errors,e),isValidating:!!Ur(s.validatingFields,e),isTouched:!!Ur((t||s).touchedFields,e)}),E=(e,t,r)=>{const n=(Ur(a,e,{_f:{}})._f||{}).ref,i=Ur(s.errors,e)||{},{ref:o,message:l,type:c,...d}=i;zr(s.errors,e,{...d,...t,ref:n}),f.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&n&&n.focus&&n.focus()},F=e=>f.state.subscribe({next:t=>{var r,a,o;r=e.name,a=t.name,o=e.exact,r&&a&&r!==a&&!gs(r).some(e=>e&&(o?e===a:e.startsWith(a)||a.startsWith(e)))||!((e,t,r,s)=>{r(e);const{name:a,...n}=e;return xs(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(e=>t[e]===(!s||Yr))})(t,e.formState||d,T,e.reRenderRoot)||e.callback({values:{...i},...s,...t,defaultValues:n})}}).unsubscribe,O=(e,t={})=>{for(const o of e?gs(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(As(a,o),As(i,o)),!t.keepError&&As(s.errors,o),!t.keepDirty&&As(s.dirtyFields,o),!t.keepTouched&&As(s.touchedFields,o),!t.keepIsValidating&&As(s.validatingFields,o),!r.shouldUnregister&&!t.keepDefaultValue&&As(n,o);f.state.next({values:Mr(i)}),f.state.next({...s,...t.keepDirty?{isDirty:w()}:{}}),!t.keepIsValid&&p()},I=({disabled:e,name:t})=>{(Br(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},L=(e,t={})=>{let s=Ur(a,e);const i=Br(t.disabled)||Br(r.disabled);return zr(a,e,{...s||{},_f:{...s&&s._f?s._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),s?I({disabled:Br(t.disabled)?t.disabled:r.disabled,name:e}):y(e,!0,t.value),{...i?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:$s(t.min),max:$s(t.max),minLength:$s(t.minLength),maxLength:$s(t.maxLength),pattern:$s(t.pattern)}:{},name:e,onChange:A,onBlur:A,ref:i=>{if(i){L(e,t),s=Ur(a,e);const r=Pr(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>_s(e)||Nr(e))(r),l=s._f.refs||[];if(o?l.find(e=>e===r):r===s._f.ref)return;zr(a,e,{_f:{...s._f,...o?{refs:[...l.filter(Ss),r,...Array.isArray(Ur(n,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),y(e,!1,void 0,r)}else s=Ur(a,e,{}),s._f&&(s._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!Ir(l.array,e)||!o.action)&&l.unMount.add(e)}}},M=()=>r.shouldFocusError&&Hs(a,C,l.mount),R=(e,t)=>async n=>{let o;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let c=Mr(i);if(f.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await x();s.errors=e,c=Mr(t)}else await v(a);if(l.disabled.size)for(const e of l.disabled)As(c,e);if(As(s.errors,"root"),xs(s.errors)){f.state.next({errors:{}});try{await e(c,n)}catch(d){o=d}}else t&&await t({...s.errors},n),M(),setTimeout(M);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xs(s.errors)&&!o,submitCount:s.submitCount+1,errors:s.errors}),o)throw o},P=(e,t={})=>{const c=e?Mr(e):n,u=Mr(c),m=xs(e),p=m?n:u;if(t.keepDefaultValues||(n=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(Vs(n,i))]);for(const t of Array.from(e))Ur(s.dirtyFields,t)?zr(p,t,Ur(i,t)):S(t,Ur(p,t))}else{if(Lr&&Pr(e))for(const e of l.mount){const t=Ur(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(js(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)S(e,Ur(p,e));else a={}}i=r.shouldUnregister?t.keepDefaultValues?Mr(n):{}:Mr(p),f.array.next({values:{...p}}),f.state.next({values:{...p}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!r.shouldUnregister,f.state.next({submitCount:t.keepSubmitCount?s.submitCount:0,isDirty:!m&&(t.keepDirty?s.isDirty:!(!t.keepDefaultValues||fs(e,n))),isSubmitted:!!t.keepIsSubmitted&&s.isSubmitted,dirtyFields:m?{}:t.keepDirtyValues?t.keepDefaultValues&&i?Vs(n,i):s.dirtyFields:t.keepDefaultValues&&e?Vs(n,e):t.keepDirty?s.dirtyFields:{},touchedFields:t.keepTouched?s.touchedFields:{},errors:t.keepErrors?s.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1})},$=(e,t)=>P(ws(e)?e(i):e,t),T=e=>{s={...s,...e}},U={control:{register:L,unregister:O,getFieldState:V,handleSubmit:R,setError:E,_subscribe:F,_runSchema:x,_focusError:M,_getWatch:j,_getDirty:w,_setValid:p,_setFieldArray:(e,t=[],l,c,m=!0,p=!0)=>{if(c&&l&&!r.disabled){if(o.action=!0,p&&Array.isArray(Ur(a,e))){const t=l(Ur(a,e),c.argA,c.argB);m&&zr(a,e,t)}if(p&&Array.isArray(Ur(s.errors,e))){const t=l(Ur(s.errors,e),c.argA,c.argB);m&&zr(s.errors,e,t),((e,t)=>{!$r(Ur(e,t)).length&&As(e,t)})(s.errors,e)}if((d.touchedFields||u.touchedFields)&&p&&Array.isArray(Ur(s.touchedFields,e))){const t=l(Ur(s.touchedFields,e),c.argA,c.argB);m&&zr(s.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(s.dirtyFields=Vs(n,i)),f.state.next({name:e,isDirty:w(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else zr(i,e,t)},_setDisabledField:I,_setErrors:e=>{s.errors=e,f.state.next({errors:s.errors,isValid:!1})},_getFieldArray:e=>$r(Ur(o.mount?i:n,e,r.shouldUnregister?Ur(n,e,[]):[])),_reset:P,_resetDefaultValues:()=>ws(r.defaultValues)&&r.defaultValues().then(e=>{$(e,r.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=Ur(a,e);t&&(t._f.refs?t._f.refs.every(e=>!Ss(e)):!Ss(t._f.ref))&&O(e)}l.unMount=new Set},_disableForm:e=>{Br(e)&&(f.state.next({disabled:e}),Hs(a,(t,r)=>{const s=Ur(a,r);s&&(t.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach(t=>{t.disabled=s._f.disabled||e}))},0,!1))},_subjects:f,_proxyFormState:d,get _fields(){return a},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return n},get _names(){return l},set _names(e){l=e},get _formState(){return s},get _options(){return r},set _options(e){r={...r,...e}}},subscribe:e=>(o.mount=!0,u={...u,...e.formState},F({...e,formState:u})),trigger:N,register:L,handleSubmit:R,watch:(e,t)=>ws(e)?f.state.subscribe({next:r=>"values"in r&&e(j(void 0,t),r)}):j(e,t,!0),setValue:S,getValues:D,reset:$,resetField:(e,t={})=>{Ur(a,e)&&(Pr(t.defaultValue)?S(e,Mr(Ur(n,e))):(S(e,t.defaultValue),zr(n,e,Mr(t.defaultValue))),t.keepTouched||As(s.touchedFields,e),t.keepDirty||(As(s.dirtyFields,e),s.isDirty=t.defaultValue?w(e,Mr(Ur(n,e))):w()),t.keepError||(As(s.errors,e),d.isValid&&p()),f.state.next({...s}))},clearErrors:e=>{e&&gs(e).forEach(e=>As(s.errors,e)),f.state.next({errors:e?s.errors:{}})},unregister:O,setError:E,setFocus:(e,t={})=>{const r=Ur(a,e),s=r&&r._f;if(s){const e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),t.shouldSelect&&ws(e.select)&&e.select())}},getFieldState:V};return{...U,formControl:U}}function Zs(e={}){const t=w.useRef(void 0),r=w.useRef(void 0),[s,a]=w.useState({isDirty:!1,isValidating:!1,isLoading:ws(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ws(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!ws(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:r,...a}=Js(e);t.current={...a,formState:s}}const n=t.current.control;return n._options=e,ls(()=>{const e=n._subscribe({formState:n._proxyFormState,callback:()=>a({...n._formState}),reRenderRoot:!0});return a(e=>({...e,isReady:!0})),n._formState.isReady=!0,e},[n]),w.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),w.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),w.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),w.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),w.useEffect(()=>{if(n._proxyFormState.isDirty){const e=n._getDirty();e!==s.isDirty&&n._subjects.state.next({isDirty:e})}},[n,s.isDirty]),w.useEffect(()=>{e.values&&!fs(e.values,r.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),r.current=e.values,a(e=>({...e}))):n._resetDefaultValues()},[n,e.values]),w.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),t.current.formState=os(s,n),t.current}const ea="0123456789abcdef",ta=[];for(let Wa=0;Wa<256;Wa++)ta[Wa]=ea[Wa>>4&15]+ea[15&Wa];const ra=e=>{const t=e.length;let r="",s=0;for(;s<t;)r+=ta[e[s++]];return r};for(var sa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aa="undefined"==typeof Uint8Array?[]:new Uint8Array(256),na=0;na<64;na++)aa[sa.charCodeAt(na)]=na;const ia=new TextDecoder,oa=(e,t)=>ia.decode(e),la=new TextEncoder,ca=e=>la.encode(e),da="undefined"!=typeof window?window:self,ua=da.crypto||da.msCrypto||{},fa=ua.subtle||ua.webkitSubtle,ma={hex:ra,base64:e=>function(e){var t,r=new Uint8Array(e),s=r.length,a="";for(t=0;t<s;t+=3)a+=sa[r[t]>>2],a+=sa[(3&r[t])<<4|r[t+1]>>4],a+=sa[(15&r[t+1])<<2|r[t+2]>>6],a+=sa[63&r[t+2]];return s%3==2?a=a.substring(0,a.length-1)+"=":s%3==1&&(a=a.substring(0,a.length-2)+"=="),a}(e)};function pa(e){const t=e<0?1:0;return e=Math.abs(Number(e||1)),Math.floor(Math.log10(e))+1+t}function ha(e){return ArrayBuffer.isView(e)?"arraybufferview":Array.isArray(e)?"array":e instanceof Number?"number":e instanceof Boolean?"boolean":e instanceof Set?"set":e instanceof Map?"map":e instanceof String?"string":e instanceof ArrayBuffer?"arraybuffer":typeof e}function ya(e,t,r){const s=[];let a=null;return ya._encode(s,e),a=((e,t=0)=>{const r=e.length||0;if(!t){let s=r;for(;s--;)t+=e[s].length}const s=new Uint8Array(t);let a=t,n=r;for(;n--;)a-=e[n].length,s.set(e[n],a);return s})(s),ya.bytes=a.length,ArrayBuffer.isView(t)?(t.set(a,r),t):a}ya.bytes=-1,ya._floatConversionDetected=!1,ya._encode=function(e,t){if(null!=t)switch(ha(t)){case"object":ya.dict(e,t);break;case"map":ya.dictMap(e,t);break;case"array":ya.list(e,t);break;case"set":ya.listSet(e,t);break;case"string":ya.string(e,t);break;case"number":case"boolean":ya.number(e,t);break;case"arraybufferview":ya.buffer(e,new Uint8Array(t.buffer,t.byteOffset,t.byteLength));break;case"arraybuffer":ya.buffer(e,new Uint8Array(t))}};const ga=new Uint8Array([101]),ba=new Uint8Array([100]),xa=new Uint8Array([108]);ya.buffer=function(e,t){e.push(ca(t.length+":"),t)},ya.string=function(e,t){e.push(ca(ca(t).byteLength+":"+t))},ya.number=function(e,t){if(Number.isInteger(t))return e.push(ca("i"+BigInt(t)+"e"));const r=2147483648,s=(t/r|0)*r+(t%r|0);e.push(ca("i"+s+"e")),s===t||ya._floatConversionDetected||(ya._floatConversionDetected=!0)},ya.dict=function(e,t){e.push(ba);let r,s=0;const a=Object.keys(t).sort(),n=a.length;for(;s<n;s++)r=a[s],null!=t[r]&&(ya.string(e,r),ya._encode(e,t[r]));e.push(ga)},ya.dictMap=function(e,t){e.push(ba);const r=Array.from(t.keys()).sort();for(const s of r)null!=t.get(s)&&(ArrayBuffer.isView(s)?ya._encode(e,s):ya.string(e,String(s)),ya._encode(e,t.get(s)));e.push(ga)},ya.list=function(e,t){let r=0;const s=t.length;for(e.push(xa);r<s;r++)null!=t[r]&&ya._encode(e,t[r]);e.push(ga)},ya.listSet=function(e,t){e.push(xa);for(const r of t)null!=r&&ya._encode(e,r);e.push(ga)};function va(e,t,r){let s=0,a=1;for(let n=t;n<r;n++){const r=e[n];if(r<58&&r>=48)s=10*s+(r-48);else if(n!==t||43!==r){if(n!==t||45!==r){if(46===r)break;throw new Error("not a number: buffer["+n+"] = "+r)}a=-1}}return s*a}function wa(e,t,r,s){return null==e||0===e.length?null:("number"!=typeof t&&null==s&&(s=t,t=void 0),"number"!=typeof r&&null==s&&(s=r,r=void 0),wa.position=0,wa.encoding=s||null,wa.data=ArrayBuffer.isView(e)?new Uint8Array(e.slice(t,r)):ca(e),wa.bytes=wa.data.length,wa.next())}function ja(e){if(null==e)return 0;const t=ha(e);switch(t){case"arraybufferview":return function(e){const t=e.byteLength-e.byteOffset;return pa(t)+1+t}(e);case"string":return function(e){const t=ca(e).byteLength;return pa(t)+1+t}(e);case"array":case"set":return function(e){let t=2;for(const r of e)t+=ja(r);return t}(e);case"number":return 1+pa(Math.floor(e))+1;case"bigint":return 1+e.toString().length+1;case"object":return function(e){let t=2;const r=Object.keys(e);for(let s=0;s<r.length;s++){const a=ca(r[s]).byteLength;t+=pa(a)+1+a,t+=ja(e[r[s]])}return t}(e);case"map":return function(e){let t=2;for(const[r,s]of e){const e=ca(r).byteLength;t+=pa(e)+1+e,t+=ja(s)}return t}(e);default:throw new TypeError(`Unsupported value of type "${t}"`)}}wa.bytes=0,wa.position=0,wa.data=null,wa.encoding=null,wa.next=function(){switch(wa.data[wa.position]){case 100:return wa.dictionary();case 108:return wa.list();case 105:return wa.integer();default:return wa.buffer()}},wa.find=function(e){let t=wa.position;const r=wa.data.length,s=wa.data;for(;t<r;){if(s[t]===e)return t;t++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(e)+'" [0x'+e.toString(16)+"]")},wa.dictionary=function(){wa.position++;const e={};for(;101!==wa.data[wa.position];){const t=wa.buffer();let r=oa(t);r.includes("")&&(r=ra(t)),e[r]=wa.next()}return wa.position++,e},wa.list=function(){wa.position++;const e=[];for(;101!==wa.data[wa.position];)e.push(wa.next());return wa.position++,e},wa.integer=function(){const e=wa.find(101),t=va(wa.data,wa.position+1,e);return wa.position+=e+1-wa.position,t},wa.buffer=function(){let e=wa.find(58);const t=va(wa.data,wa.position,e),r=++e+t;return wa.position=r,wa.encoding?oa(wa.data.slice(e,r)):wa.data.slice(e,r)};const ka={encode:ya,decode:wa,byteLength:ja,encodingLength:ja};async function _a(e){e instanceof Uint8Array&&(e=ka.decode(e)),Aa(e.info,"info"),Aa(e.info["name.utf-8"]||e.info.name,"info.name"),Aa(e.info["piece length"],"info['piece length']"),Aa(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach(e=>{Aa("number"==typeof e.length,"info.files[0].length"),Aa(e["path.utf-8"]||e.path,"info.files[0].path")}):Aa("number"==typeof e.info.length,"info.length");const t={info:e.info,infoBuffer:ka.encode(e.info),name:oa(e.info["name.utf-8"]||e.info.name),announce:[],infoHashBuffer:new Uint8Array(0),infoHash:"",urlList:[],files:[],length:0,pieceLength:0,lastPieceLength:0,pieces:[]};t.infoHashBuffer=await(async(e,t,r="sha-1")=>{if(!fa)throw new Error("no web crypto support");"string"==typeof e&&(e=ca(e));const s=new Uint8Array(await fa.digest(r,e));return t?ma[t](s):s})(t.infoBuffer),t.infoHash=ra(t.infoHashBuffer),void 0!==e.info.private&&(t.private=!!e.info.private),e["creation date"]&&(t.created=new Date(1e3*e["creation date"])),e["created by"]&&(t.createdBy=oa(e["created by"])),e.comment instanceof Uint8Array&&(t.comment=oa(e.comment)),Array.isArray(e["announce-list"])&&e["announce-list"].length>0?e["announce-list"].forEach(e=>{e.forEach(e=>{t.announce.push(oa(e))})}):e.announce&&t.announce.push(oa(e.announce)),e["url-list"]instanceof Uint8Array&&(e["url-list"]=e["url-list"].length>0?[e["url-list"]]:[]),t.urlList=(e["url-list"]||[]).map(e=>oa(e)),t.announce=Array.from(new Set(t.announce)),t.urlList=Array.from(new Set(t.urlList));const r=e.info.files||[e.info];t.files=r.map((e,s)=>{const a=[].concat(t.name,e["path.utf-8"]||e.path||[]).map(e=>e instanceof Uint8Array?oa(e):e);return{path:a.join("/"),name:a[a.length-1],length:e.length,offset:r.slice(0,s).reduce(Sa,0)}}),t.length=r.reduce(Sa,0);const s=t.files[t.files.length-1];return t.pieceLength=e.info["piece length"],t.lastPieceLength=(s.offset+s.length)%t.pieceLength||t.pieceLength,t.pieces=function(e){const t=[];for(let r=0;r<e.length;r+=20)t.push(ra(e.slice(r,r+20)));return t}(e.info.pieces),t}function Sa(e,t){return e+t.length}function Aa(e,t){if(!e)throw new Error(`Torrent is missing required field: ${t}`)}const Ca=function(e){e=Object.assign({},e);let t=new Set;e.xt&&"string"==typeof e.xt&&t.add(e.xt),e.xt&&Array.isArray(e.xt)&&(t=new Set(e.xt)),e.infoHashBuffer&&t.add(`urn:btih:${ra(e.infoHashBuffer)}`),e.infoHash&&t.add(`urn:btih:${e.infoHash}`),e.infoHashV2Buffer&&t.add(e.xt=`urn:btmh:1220${ra(e.infoHashV2Buffer)}`),e.infoHashV2&&t.add(`urn:btmh:1220${e.infoHashV2}`);const r=Array.from(t);1===r.length&&(e.xt=r[0]),r.length>1&&(e.xt=r),e.publicKeyBuffer&&(e.xs=`urn:btpk:${ra(e.publicKeyBuffer)}`),e.publicKey&&(e.xs=`urn:btpk:${e.publicKey}`),e.name&&(e.dn=e.name),e.keywords&&(e.kt=e.keywords),e.announce&&(e.tr=e.announce),e.urlList&&(e.ws=e.urlList,delete e.as),e.peerAddresses&&(e["x.pe"]=e.peerAddresses);let s="magnet:?";return Object.keys(e).filter(e=>2===e.length||"x.pe"===e).forEach((t,r)=>{const a=Array.isArray(e[t])?e[t]:[e[t]];var n;a.forEach((e,a)=>{(r>0||a>0)&&("kt"!==t&&"so"!==t||0===a)&&(s+="&"),"dn"===t&&(e=encodeURIComponent(e).replace(/%20/g,"+")),"tr"!==t&&"as"!==t&&"ws"!==t||(e=encodeURIComponent(e)),"xs"!==t||e.startsWith("urn:btpk:")||(e=encodeURIComponent(e)),"kt"===t&&(e=encodeURIComponent(e)),"so"!==t&&(s+="kt"===t&&a>0?`+${e}`:`${t}=${e}`)}),"so"===t&&(s+=`${t}=${n=a,n.reduce((e,t,r,s)=>(0!==r&&t===s[r-1]+1||e.push([]),e[e.length-1].push(t),e),[]).map(e=>e.length>1?`${e[0]}-${e[e.length-1]}`:`${e[0]}`)}`)}),s},Na={torrentPath:"",magnet:"",hash:""},Da=()=>{const{control:e,handleSubmit:t,setValue:a,setError:i}=Zs({defaultValues:Na}),l=o(e=>e.actions),c=r.useRef(null),d=Q(),[u,f]=r.useState(!1),m=ms({control:e,name:"magnet"}),p=ms({control:e,name:"torrentPath"}),h=r.useCallback(async e=>{try{let t="";if(f(!0),e.magnet){t=(await A.postForm("/debrid/torrents/addMagnet",{magnet:e.magnet})).data.id}const r=await d.ensureQueryData(N(t));l.setCurrentItem(r),l.setOpen(!0)}catch(t){t instanceof Error?i("magnet",{message:t.message}):t instanceof V&&i("magnet",{message:t.response?.data?.message})}finally{f(!1)}},[l,d,i]),y=r.useCallback(e=>{const t=e.target.files?.[0];t&&(a("torrentPath",t.name),t.arrayBuffer().then(e=>{_a(new Uint8Array(e)).then(e=>{const t=Ca(e);a("magnet",t)})}))},[a]);return s.jsxs("form",{className:"size-full flex gap-6 flex-col",onSubmit:t(h),children:[s.jsx("input",{ref:c,type:"file",hidden:!0,accept:".torrent",onChange:y}),s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx(be,{label:"Upload Torrent",value:p,readOnly:!0,onClick:()=>c.current?.click(),endContent:s.jsx(n.Upload,{className:"cursor-pointer text-xl",onClick:()=>c.current?.click()}),classNames:{base:"cursor-pointer",input:"cursor-pointer",inputWrapper:"cursor-pointer"}}),s.jsx(be,{label:"Magnet Link",value:m,onChange:e=>a("magnet",e.target.value)})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx(de,{type:"submit",isLoading:u,color:"primary",variant:"solid",children:"Add Torrent"})})]})},Va={links:"",password:""},Ea=()=>{const{fileId:e,restrictedId:t}=U({from:"/_authed/downloader/$tabId"}),{data:a}=G(N(e)),{control:n,setValue:i,handleSubmit:o}=Zs({defaultValues:Va}),c=l(e=>e.unRestrictState),d=l(e=>e.actions);return r.useEffect(()=>{a&&i("links",a.links.join("\n")),t&&i("links",`https://real-debrid.com/d/${t}`)},[a,t,i]),r.useEffect(()=>()=>{d.clearUnrestrictedFiles()},[d]),s.jsxs("form",{className:"flex gap-4 flex-col",onSubmit:o(async e=>{const t=e.links.split("\n").map(e=>e.trim()).filter(Boolean);d.setUnRestrictState("running");try{for(const s of t)try{const t=await A.postForm("/debrid/unrestrict/link",{link:s,password:e.password.trim()});d.addUnrestrictedFile(t.data)}catch(r){E(r)&&d.addUnrestrictedFile({id:`error-${Date.now()}-${Math.random().toString(36).slice(2)}`,filename:s,filesize:0,link:s,host:"",error:r.response?.data.error||r.message,host_icon:F,chunks:0,crc:0,download:"",streamable:0,type:"error",mimeType:"",generated:(new Date).toISOString()})}}finally{d.setUnRestrictState("idle")}}),children:[s.jsx(hs,{name:"links",control:n,render:({field:e})=>s.jsx(xe,{label:"Host Links",value:e.value,onChange:e.onChange})}),s.jsx(hs,{name:"password",control:n,render:({field:e})=>s.jsx(be,{label:"Password",description:"optional password",type:"password",value:e.value,onChange:e.onChange})}),s.jsx(de,{type:"submit",isLoading:"running"===c,color:"primary",variant:"solid",className:"w-fit",children:"Unrestrict Links"})]})},Fa={links:"Unrestrict Links",torrents:"Add Torrents"},Oa=B("/_authed/downloader/$tabId")({component:r.memo(function(){const{tabId:e}=Oa.useParams();switch(e){case"torrents":return s.jsx(Da,{});case"links":return s.jsx(Ea,{});default:return null}}),validateSearch:e=>e,loaderDeps:({search:e})=>({search:e}),meta:({params:e})=>[{title:Fa[e.tabId]}],loader:({context:{queryClient:e},deps:{search:t},params:r})=>{if(t.fileId&&"links"===r.tabId)return e.ensureQueryData(N(t.fileId))},wrapInSuspense:!0});const Ia=Ft.update({id:"/_authed",getParentRoute:()=>At}),La=Lt.update({id:"/",path:"/",getParentRoute:()=>Ia}),Ma=Mt.update({id:"/watch/$",path:"/watch/$",getParentRoute:()=>At}).lazy(()=>ae(()=>import("./watch._.lazy-CF3R6hVq.js"),__vite__mapDeps([7,0,1,2,3,4,5,8])).then(e=>e.Route)),Ra=lr.update({id:"/view",path:"/view",getParentRoute:()=>Ia}),Pa=cr.update({id:"/torrents",path:"/torrents",getParentRoute:()=>Ia}),$a=dr.update({id:"/downloads",path:"/downloads",getParentRoute:()=>Ia}),Ta=yr.update({id:"/downloader",path:"/downloader",getParentRoute:()=>Ia}),Ua=wr.update({id:"/btsearch",path:"/btsearch",getParentRoute:()=>Ia}),Ba={AuthedDownloaderTabIdRoute:Oa.update({id:"/$tabId",path:"/$tabId",getParentRoute:()=>Ta})},za={AuthedBtsearchRoute:Ua,AuthedDownloaderRoute:Ta._addFileChildren(Ba),AuthedDownloadsRoute:$a,AuthedTorrentsRoute:Pa,AuthedViewRoute:Ra,AuthedIndexRoute:La},Ha={AuthedRoute:Ia._addFileChildren(za),WatchSplatRoute:Ma},qa=X({routeTree:At._addFileChildren(Ha)._addFileTypes(),context:{queryClient:C()},defaultPreloadDelay:300,defaultPreload:!1,defaultPreloadStaleTime:0}),Ka=document.getElementById("root");if(!Ka.innerHTML){_e.createRoot(Ka).render(s.jsxs(Y,{client:C(),children:[s.jsxs(ve,{children:[s.jsx(kt,{position:"bottom-right",toastOptions:{className:"!bg-radial-1 !bg-background !text-foreground shadow-medium min-w-[220px]",success:{icon:s.jsx(n.CheckCircle,{className:"text-success"})},error:{icon:s.jsx(n.AlertCircleFilled,{className:"text-danger"})}}}),s.jsx(J,{router:qa}),s.jsx(we,{})]}),null]}))}
