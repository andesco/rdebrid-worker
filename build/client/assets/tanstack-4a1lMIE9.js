import{r as t,j as e,b as s,a as r}from"./file-select-modal-BvYNWoLI.js";import{al as i}from"./react-aria-DLFpg_Eq.js";var n=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},o="undefined"==typeof window||"Deno"in globalThis;function a(){}function c(t){return"number"==typeof t&&t>=0&&t!==1/0}function u(t,e){return Math.max(t+(e||0)-Date.now(),0)}function h(t,e){return"function"==typeof t?t(e):t}function l(t,e){return"function"==typeof t?t(e):t}function d(t,e){const{type:s="all",exact:r,fetchStatus:i,predicate:n,queryKey:o,stale:a}=t;if(o)if(r){if(e.queryHash!==f(o,e.options))return!1}else if(!y(e.queryKey,o))return!1;if("all"!==s){const t=e.isActive();if("active"===s&&!t)return!1;if("inactive"===s&&t)return!1}return("boolean"!=typeof a||e.isStale()===a)&&((!i||i===e.state.fetchStatus)&&!(n&&!n(e)))}function p(t,e){const{exact:s,status:r,predicate:i,mutationKey:n}=t;if(n){if(!e.options.mutationKey)return!1;if(s){if(m(e.options.mutationKey)!==m(n))return!1}else if(!y(e.options.mutationKey,n))return!1}return(!r||e.state.status===r)&&!(i&&!i(e))}function f(t,e){return(e?.queryKeyHashFn||m)(t)}function m(t){return JSON.stringify(t,(t,e)=>S(e)?Object.keys(e).sort().reduce((t,s)=>(t[s]=e[s],t),{}):e)}function y(t,e){return t===e||typeof t==typeof e&&(!(!t||!e||"object"!=typeof t||"object"!=typeof e)&&Object.keys(e).every(s=>y(t[s],e[s])))}function v(t,e){if(t===e)return t;const s=b(t)&&b(e);if(s||S(t)&&S(e)){const r=s?t:Object.keys(t),i=r.length,n=s?e:Object.keys(e),o=n.length,a=s?[]:{},c=new Set(r);let u=0;for(let h=0;h<o;h++){const r=s?h:n[h];(!s&&c.has(r)||s)&&void 0===t[r]&&void 0===e[r]?(a[r]=void 0,u++):(a[r]=v(t[r],e[r]),a[r]===t[r]&&void 0!==t[r]&&u++)}return i===o&&u===i?t:a}return e}function g(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function b(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function S(t){if(!R(t))return!1;const e=t.constructor;if(void 0===e)return!0;const s=e.prototype;return!!R(s)&&(!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(t)===Object.prototype)}function R(t){return"[object Object]"===Object.prototype.toString.call(t)}function C(t,e,s){return"function"==typeof s.structuralSharing?s.structuralSharing(t,e):!1!==s.structuralSharing?v(t,e):e}function w(t){return t}function O(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function _(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var P=Symbol();function x(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:t.queryFn&&t.queryFn!==P?t.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`))}function M(t,e){return"function"==typeof t?t(...e):!!t}var L=new class extends n{#t;#e;#s;constructor(){super(),this.#s=t=>{if(!o&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return"boolean"==typeof this.#t?this.#t:"hidden"!==globalThis.document?.visibilityState}},E=new class extends n{#r=!0;#e;#s;constructor(){super(),this.#s=t=>{if(!o&&window.addEventListener){const e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#r!==t&&(this.#r=t,this.listeners.forEach(e=>{e(t)}))}isOnline(){return this.#r}};function I(){let t,e;const s=new Promise((s,r)=>{t=s,e=r});function r(t){Object.assign(s,t),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=e=>{r({status:"fulfilled",value:e}),t(e)},s.reject=t=>{r({status:"rejected",reason:t}),e(t)},s}function F(t){return Math.min(1e3*2**t,3e4)}function T(t){return"online"!==(t??"online")||E.isOnline()}var j=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function D(t){return t instanceof j}function Q(t){let e,s=!1,r=0,i=!1;const n=I(),a=()=>L.isFocused()&&("always"===t.networkMode||E.isOnline())&&t.canRun(),c=()=>T(t.networkMode)&&t.canRun(),u=s=>{i||(i=!0,t.onSuccess?.(s),e?.(),n.resolve(s))},h=s=>{i||(i=!0,t.onError?.(s),e?.(),n.reject(s))},l=()=>new Promise(s=>{e=t=>{(i||a())&&s(t)},t.onPause?.()}).then(()=>{e=void 0,i||t.onContinue?.()}),d=()=>{if(i)return;let e;const n=0===r?t.initialPromise:void 0;try{e=n??t.fn()}catch(c){e=Promise.reject(c)}Promise.resolve(e).then(u).catch(e=>{if(i)return;const n=t.retry??(o?0:3),c=t.retryDelay??F,u="function"==typeof c?c(r,e):c,p=!0===n||"number"==typeof n&&r<n||"function"==typeof n&&n(r,e);var f;!s&&p?(r++,t.onFail?.(r,e),(f=u,new Promise(t=>{setTimeout(t,f)})).then(()=>a()?void 0:l()).then(()=>{s?h(e):d()})):h(e)})};return{promise:n,cancel:e=>{i||(h(new j(e)),t.abort?.())},continue:()=>(e?.(),n),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:c,start:()=>(c()?d():l().then(d),n)}}var q=t=>setTimeout(t,0);var k=function(){let t=[],e=0,s=t=>{t()},r=t=>{t()},i=q;const n=r=>{e?t.push(r):i(()=>{s(r)})};return{batch:n=>{let o;e++;try{o=n()}finally{e--,e||(()=>{const e=t;t=[],e.length&&i(()=>{r(()=>{e.forEach(t=>{s(t)})})})})()}return o},batchCalls:t=>(...e)=>{n(()=>{t(...e)})},schedule:n,setNotifyFunction:t=>{s=t},setBatchNotifyFunction:t=>{r=t},setScheduler:t=>{i=t}}}(),A=class{#i;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),c(this.gcTime)&&(this.#i=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(o?1/0:3e5))}clearGcTimeout(){this.#i&&(clearTimeout(this.#i),this.#i=void 0)}},U=class extends A{#n;#o;#a;#c;#u;#h;#l;constructor(t){super(),this.#l=!1,this.#h=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#c=t.client,this.#a=this.#c.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#n=function(t){const e="function"==typeof t.initialData?t.initialData():t.initialData,s=void 0!==e,r=s?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=t.state??this.#n,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#u?.promise}setOptions(t){this.options={...this.#h,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#a.remove(this)}setData(t,e){const s=C(this.state.data,t,this.options);return this.#d({data:s,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),s}setState(t,e){this.#d({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#u?.promise;return this.#u?.cancel(t),e?e.then(a).catch(a):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#n)}isActive(){return this.observers.some(t=>!1!==l(t.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===P||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(t=>"static"===h(t.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(t=0){return void 0===this.state.data||"static"!==t&&(!!this.state.isInvalidated||!u(this.state.dataUpdatedAt,t))}onFocus(){const t=this.observers.find(t=>t.shouldFetchOnWindowFocus());t?.refetch({cancelRefetch:!1}),this.#u?.continue()}onOnline(){const t=this.observers.find(t=>t.shouldFetchOnReconnect());t?.refetch({cancelRefetch:!1}),this.#u?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#a.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#u&&(this.#l?this.#u.cancel({revert:!0}):this.#u.cancelRetry()),this.scheduleGc()),this.#a.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#d({type:"invalidate"})}fetch(t,e){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#u)return this.#u.continueRetry(),this.#u.promise;if(t&&this.setOptions(t),!this.options.queryFn){const t=this.observers.find(t=>t.options.queryFn);t&&this.setOptions(t.options)}const s=new AbortController,r=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(this.#l=!0,s.signal)})},i=()=>{const t=x(this.options,e),s=(()=>{const t={client:this.#c,queryKey:this.queryKey,meta:this.meta};return r(t),t})();return this.#l=!1,this.options.persister?this.options.persister(t,s,this):t(s)},n=(()=>{const t={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#c,state:this.state,fetchFn:i};return r(t),t})();this.options.behavior?.onFetch(n,this),this.#o=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===n.fetchOptions?.meta||this.#d({type:"fetch",meta:n.fetchOptions?.meta});const o=t=>{D(t)&&t.silent||this.#d({type:"error",error:t}),D(t)||(this.#a.config.onError?.(t,this),this.#a.config.onSettled?.(this.state.data,t,this)),this.scheduleGc()};return this.#u=Q({initialPromise:e?.initialPromise,fn:n.fetchFn,abort:s.abort.bind(s),onSuccess:t=>{if(void 0!==t){try{this.setData(t)}catch(e){return void o(e)}this.#a.config.onSuccess?.(t,this),this.#a.config.onSettled?.(t,this.state.error,this),this.scheduleGc()}else o(new Error(`${this.queryHash} data is undefined`))},onError:o,onFail:(t,e)=>{this.#d({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#d({type:"pause"})},onContinue:()=>{this.#d({type:"continue"})},retry:n.options.retry,retryDelay:n.options.retryDelay,networkMode:n.options.networkMode,canRun:()=>!0}),this.#u.start()}#d(t){this.state=(e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...K(e.data,this.options),fetchMeta:t.meta??null};case"success":return this.#o=void 0,{...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return D(s)&&s.revert&&this.#o?{...this.#o,fetchStatus:"idle"}:{...e,error:s,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),k.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#a.notify({query:this,type:"updated",action:t})})}};function K(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:T(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}var B=class extends n{constructor(t={}){super(),this.config=t,this.#p=new Map}#p;build(t,e,s){const r=e.queryKey,i=e.queryHash??f(r,e);let n=this.get(i);return n||(n=new U({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:s,defaultOptions:t.getQueryDefaults(r)}),this.add(n)),n}add(t){this.#p.has(t.queryHash)||(this.#p.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#p.get(t.queryHash);e&&(t.destroy(),e===t&&this.#p.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){k.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#p.get(t)}getAll(){return[...this.#p.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(t=>d(e,t))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(e=>d(t,e)):e}notify(t){k.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){k.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){k.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},N=class extends A{#f;#m;#u;constructor(t){super(),this.mutationId=t.mutationId,this.#m=t.mutationCache,this.#f=[],this.state=t.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#f.includes(t)||(this.#f.push(t),this.clearGcTimeout(),this.#m.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#f=this.#f.filter(e=>e!==t),this.scheduleGc(),this.#m.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#f.length||("pending"===this.state.status?this.scheduleGc():this.#m.remove(this))}continue(){return this.#u?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#d({type:"continue"})};this.#u=Q({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(t,e)=>{this.#d({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#d({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#m.canRun(this)});const s="pending"===this.state.status,r=!this.#u.canStart();try{if(s)e();else{this.#d({type:"pending",variables:t,isPaused:r}),await(this.#m.config.onMutate?.(t,this));const e=await(this.options.onMutate?.(t));e!==this.state.context&&this.#d({type:"pending",context:e,variables:t,isPaused:r})}const i=await this.#u.start();return await(this.#m.config.onSuccess?.(i,t,this.state.context,this)),await(this.options.onSuccess?.(i,t,this.state.context)),await(this.#m.config.onSettled?.(i,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(i,null,t,this.state.context)),this.#d({type:"success",data:i}),i}catch(i){try{throw await(this.#m.config.onError?.(i,t,this.state.context,this)),await(this.options.onError?.(i,t,this.state.context)),await(this.#m.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,i,t,this.state.context)),i}finally{this.#d({type:"error",error:i})}}finally{this.#m.runNext(this)}}#d(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),k.batch(()=>{this.#f.forEach(e=>{e.onMutationUpdate(t)}),this.#m.notify({mutation:this,type:"updated",action:t})})}};var $=class extends n{constructor(t={}){super(),this.config=t,this.#y=new Set,this.#v=new Map,this.#g=0}#y;#v;#g;build(t,e,s){const r=new N({mutationCache:this,mutationId:++this.#g,options:t.defaultMutationOptions(e),state:s});return this.add(r),r}add(t){this.#y.add(t);const e=z(t);if("string"==typeof e){const s=this.#v.get(e);s?s.push(t):this.#v.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#y.delete(t)){const e=z(t);if("string"==typeof e){const s=this.#v.get(e);if(s)if(s.length>1){const e=s.indexOf(t);-1!==e&&s.splice(e,1)}else s[0]===t&&this.#v.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=z(t);if("string"==typeof e){const s=this.#v.get(e),r=s?.find(t=>"pending"===t.state.status);return!r||r===t}return!0}runNext(t){const e=z(t);if("string"==typeof e){const s=this.#v.get(e)?.find(e=>e!==t&&e.state.isPaused);return s?.continue()??Promise.resolve()}return Promise.resolve()}clear(){k.batch(()=>{this.#y.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#y.clear(),this.#v.clear()})}getAll(){return Array.from(this.#y)}find(t){const e={exact:!0,...t};return this.getAll().find(t=>p(e,t))}findAll(t={}){return this.getAll().filter(e=>p(t,e))}notify(t){k.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(t=>t.state.isPaused);return k.batch(()=>Promise.all(t.map(t=>t.continue().catch(a))))}};function z(t){return t.options.scope?.id}function H(t){return{onFetch:(e,s)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,n=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let s=!1;const u=x(e.options,e.fetchOptions),h=async(t,r,i)=>{if(s)return Promise.reject();if(null==r&&t.pages.length)return Promise.resolve(t);const n=(()=>{const t={client:e.client,queryKey:e.queryKey,pageParam:r,direction:i?"backward":"forward",meta:e.options.meta};var n;return n=t,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(e.signal.aborted?s=!0:e.signal.addEventListener("abort",()=>{s=!0}),e.signal)}),t})(),o=await u(n),{maxPages:a}=e.options,c=i?_:O;return{pages:c(t.pages,o,a),pageParams:c(t.pageParams,r,a)}};if(i&&n.length){const t="backward"===i,e={pages:n,pageParams:o},s=(t?V:W)(r,e);a=await h(e,s,t)}else{const e=t??n.length;do{const t=0===c?o[0]??r.initialPageParam:W(r,a);if(c>0&&null==t)break;a=await h(a,t),c++}while(c<e)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s):e.fetchFn=u}}}function W(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function V(t,{pages:e,pageParams:s}){return e.length>0?t.getPreviousPageParam?.(e[0],e,s[0],s):void 0}var G=class{#b;#m;#h;#S;#R;#C;#w;#O;constructor(t={}){this.#b=t.queryCache||new B,this.#m=t.mutationCache||new $,this.#h=t.defaultOptions||{},this.#S=new Map,this.#R=new Map,this.#C=0}mount(){this.#C++,1===this.#C&&(this.#w=L.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#b.onFocus())}),this.#O=E.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#b.onOnline())}))}unmount(){this.#C--,0===this.#C&&(this.#w?.(),this.#w=void 0,this.#O?.(),this.#O=void 0)}isFetching(t){return this.#b.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#m.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#b.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=this.#b.build(this,e),r=s.state.data;return void 0===r?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(h(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#b.findAll(t).map(({queryKey:t,state:e})=>[t,e.data])}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),i=this.#b.get(r.queryHash),n=i?.state.data,o=function(t,e){return"function"==typeof t?t(e):t}(e,n);if(void 0!==o)return this.#b.build(this,r).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return k.batch(()=>this.#b.findAll(t).map(({queryKey:t})=>[t,this.setQueryData(t,e,s)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#b.get(e.queryHash)?.state}removeQueries(t){const e=this.#b;k.batch(()=>{e.findAll(t).forEach(t=>{e.remove(t)})})}resetQueries(t,e){const s=this.#b;return k.batch(()=>(s.findAll(t).forEach(t=>{t.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=k.batch(()=>this.#b.findAll(t).map(t=>t.cancel(s)));return Promise.all(r).then(a).catch(a)}invalidateQueries(t,e={}){return k.batch(()=>(this.#b.findAll(t).forEach(t=>{t.invalidate()}),"none"===t?.refetchType?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=k.batch(()=>this.#b.findAll(t).filter(t=>!t.isDisabled()&&!t.isStatic()).map(t=>{let e=t.fetch(void 0,s);return s.throwOnError||(e=e.catch(a)),"paused"===t.state.fetchStatus?Promise.resolve():e}));return Promise.all(r).then(a)}fetchQuery(t){const e=this.defaultQueryOptions(t);void 0===e.retry&&(e.retry=!1);const s=this.#b.build(this,e);return s.isStaleByTime(h(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(a).catch(a)}fetchInfiniteQuery(t){return t.behavior=H(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(a).catch(a)}ensureInfiniteQueryData(t){return t.behavior=H(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return E.isOnline()?this.#m.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#b}getMutationCache(){return this.#m}getDefaultOptions(){return this.#h}setDefaultOptions(t){this.#h=t}setQueryDefaults(t,e){this.#S.set(m(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#S.values()],s={};return e.forEach(e=>{y(t,e.queryKey)&&Object.assign(s,e.defaultOptions)}),s}setMutationDefaults(t,e){this.#R.set(m(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#R.values()],s={};return e.forEach(e=>{y(t,e.mutationKey)&&Object.assign(s,e.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#h.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=f(e.queryKey,e)),void 0===e.refetchOnReconnect&&(e.refetchOnReconnect="always"!==e.networkMode),void 0===e.throwOnError&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===P&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#h.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#b.clear(),this.#m.clear()}},J=class extends n{constructor(t,e){super(),this.options=e,this.#c=t,this.#_=null,this.#P=I(),this.options.experimental_prefetchInRender||this.#P.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#c;#x=void 0;#M=void 0;#L=void 0;#E;#I;#P;#_;#F;#T;#j;#D;#Q;#q;#k=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#x.addObserver(this),X(this.#x,this.options)?this.#A():this.updateResult(),this.#U())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Y(this.#x,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Y(this.#x,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#K(),this.#B(),this.#x.removeObserver(this)}setOptions(t){const e=this.options,s=this.#x;if(this.options=this.#c.defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof l(this.options.enabled,this.#x))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#x.setOptions(this.options),e._defaulted&&!g(this.options,e)&&this.#c.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#x,observer:this});const r=this.hasListeners();r&&Z(this.#x,s,this.options,e)&&this.#A(),this.updateResult(),!r||this.#x===s&&l(this.options.enabled,this.#x)===l(e.enabled,this.#x)&&h(this.options.staleTime,this.#x)===h(e.staleTime,this.#x)||this.#$();const i=this.#z();!r||this.#x===s&&l(this.options.enabled,this.#x)===l(e.enabled,this.#x)&&i===this.#q||this.#H(i)}getOptimisticResult(t){const e=this.#c.getQueryCache().build(this.#c,t),s=this.createResult(e,t);return function(t,e){if(!g(t.getCurrentResult(),e))return!0;return!1}(this,s)&&(this.#L=s,this.#I=this.options,this.#E=this.#x.state),s}getCurrentResult(){return this.#L}trackResult(t,e){return new Proxy(t,{get:(t,s)=>(this.trackProp(s),e?.(s),Reflect.get(t,s))})}trackProp(t){this.#k.add(t)}getCurrentQuery(){return this.#x}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#c.defaultQueryOptions(t),s=this.#c.getQueryCache().build(this.#c,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#A({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#L))}#A(t){this.#N();let e=this.#x.fetch(this.options,t);return t?.throwOnError||(e=e.catch(a)),e}#$(){this.#K();const t=h(this.options.staleTime,this.#x);if(o||this.#L.isStale||!c(t))return;const e=u(this.#L.dataUpdatedAt,t)+1;this.#D=setTimeout(()=>{this.#L.isStale||this.updateResult()},e)}#z(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#x):this.options.refetchInterval)??!1}#H(t){this.#B(),this.#q=t,!o&&!1!==l(this.options.enabled,this.#x)&&c(this.#q)&&0!==this.#q&&(this.#Q=setInterval(()=>{(this.options.refetchIntervalInBackground||L.isFocused())&&this.#A()},this.#q))}#U(){this.#$(),this.#H(this.#z())}#K(){this.#D&&(clearTimeout(this.#D),this.#D=void 0)}#B(){this.#Q&&(clearInterval(this.#Q),this.#Q=void 0)}createResult(t,e){const s=this.#x,r=this.options,i=this.#L,n=this.#E,o=this.#I,a=t!==s?t.state:this.#M,{state:c}=t;let u,h={...c},d=!1;if(e._optimisticResults){const i=this.hasListeners(),n=!i&&X(t,e),o=i&&Z(t,s,e,r);(n||o)&&(h={...h,...K(c.data,t.options)}),"isRestoring"===e._optimisticResults&&(h.fetchStatus="idle")}let{error:p,errorUpdatedAt:f,status:m}=h;u=h.data;let y=!1;if(void 0!==e.placeholderData&&void 0===u&&"pending"===m){let t;i?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(t=i.data,y=!0):t="function"==typeof e.placeholderData?e.placeholderData(this.#j?.state.data,this.#j):e.placeholderData,void 0!==t&&(m="success",u=C(i?.data,t,e),d=!0)}if(e.select&&void 0!==u&&!y)if(i&&u===n?.data&&e.select===this.#F)u=this.#T;else try{this.#F=e.select,u=e.select(u),u=C(i?.data,u,e),this.#T=u,this.#_=null}catch(O){this.#_=O}this.#_&&(p=this.#_,u=this.#T,f=Date.now(),m="error");const v="fetching"===h.fetchStatus,g="pending"===m,b="error"===m,S=g&&v,R=void 0!==u,w={status:m,fetchStatus:h.fetchStatus,isPending:g,isSuccess:"success"===m,isError:b,isInitialLoading:S,isLoading:S,data:u,dataUpdatedAt:h.dataUpdatedAt,error:p,errorUpdatedAt:f,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>a.dataUpdateCount||h.errorUpdateCount>a.errorUpdateCount,isFetching:v,isRefetching:v&&!g,isLoadingError:b&&!R,isPaused:"paused"===h.fetchStatus,isPlaceholderData:d,isRefetchError:b&&R,isStale:tt(t,e),refetch:this.refetch,promise:this.#P,isEnabled:!1!==l(e.enabled,t)};if(this.options.experimental_prefetchInRender){const e=t=>{"error"===w.status?t.reject(w.error):void 0!==w.data&&t.resolve(w.data)},r=()=>{const t=this.#P=w.promise=I();e(t)},i=this.#P;switch(i.status){case"pending":t.queryHash===s.queryHash&&e(i);break;case"fulfilled":"error"!==w.status&&w.data===i.value||r();break;case"rejected":"error"===w.status&&w.error===i.reason||r()}}return w}updateResult(){const t=this.#L,e=this.createResult(this.#x,this.options);if(this.#E=this.#x.state,this.#I=this.options,void 0!==this.#E.data&&(this.#j=this.#x),g(e,t))return;this.#L=e;this.#W({listeners:(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!this.#k.size)return!0;const r=new Set(s??this.#k);return this.options.throwOnError&&r.add("error"),Object.keys(this.#L).some(e=>{const s=e;return this.#L[s]!==t[s]&&r.has(s)})})()})}#N(){const t=this.#c.getQueryCache().build(this.#c,this.options);if(t===this.#x)return;const e=this.#x;this.#x=t,this.#M=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#U()}#W(t){k.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t(this.#L)}),this.#c.getQueryCache().notify({query:this.#x,type:"observerResultsUpdated"})})}};function X(t,e){return function(t,e){return!1!==l(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&Y(t,e,e.refetchOnMount)}function Y(t,e,s){if(!1!==l(e.enabled,t)&&"static"!==h(e.staleTime,t)){const r="function"==typeof s?s(t):s;return"always"===r||!1!==r&&tt(t,e)}return!1}function Z(t,e,s,r){return(t!==e||!1===l(r.enabled,t))&&(!s.suspense||"error"!==t.state.status)&&tt(t,s)}function tt(t,e){return!1!==l(e.enabled,t)&&t.isStaleByTime(h(e.staleTime,t))}function et(t,e){const s=new Set(e);return t.filter(t=>!s.has(t))}var st=class extends n{#c;#V;#p;#G;#f;#J;#X;#Y;#Z=[];constructor(t,e,s){super(),this.#c=t,this.#G=s,this.#p=[],this.#f=[],this.#V=[],this.setQueries(e)}onSubscribe(){1===this.listeners.size&&this.#f.forEach(t=>{t.subscribe(e=>{this.#tt(t,e)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#f.forEach(t=>{t.destroy()})}setQueries(t,e){this.#p=t,this.#G=e,k.batch(()=>{const t=this.#f,e=this.#et(this.#p);this.#Z=e,e.forEach(t=>t.observer.setOptions(t.defaultedQueryOptions));const s=e.map(t=>t.observer),r=s.map(t=>t.getCurrentResult()),i=s.some((e,s)=>e!==t[s]);(t.length!==s.length||i)&&(this.#f=s,this.#V=r,this.hasListeners()&&(et(t,s).forEach(t=>{t.destroy()}),et(s,t).forEach(t=>{t.subscribe(e=>{this.#tt(t,e)})}),this.#W()))})}getCurrentResult(){return this.#V}getQueries(){return this.#f.map(t=>t.getCurrentQuery())}getObservers(){return this.#f}getOptimisticResult(t,e){const s=this.#et(t),r=s.map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions));return[r,t=>this.#st(t??r,e),()=>this.#rt(r,s)]}#rt(t,e){return e.map((s,r)=>{const i=t[r];return s.defaultedQueryOptions.notifyOnChangeProps?i:s.observer.trackResult(i,t=>{e.forEach(e=>{e.observer.trackProp(t)})})})}#st(t,e){return e?(this.#J&&this.#V===this.#Y&&e===this.#X||(this.#X=e,this.#Y=this.#V,this.#J=v(this.#J,e(t))),this.#J):t}#et(t){const e=new Map(this.#f.map(t=>[t.options.queryHash,t])),s=[];return t.forEach(t=>{const r=this.#c.defaultQueryOptions(t),i=e.get(r.queryHash);i?s.push({defaultedQueryOptions:r,observer:i}):s.push({defaultedQueryOptions:r,observer:new J(this.#c,r)})}),s}#tt(t,e){const s=this.#f.indexOf(t);-1!==s&&(this.#V=function(t,e,s){const r=t.slice(0);return r[e]=s,r}(this.#V,s,e),this.#W())}#W(){if(this.hasListeners()){const t=this.#J,e=this.#rt(this.#V,this.#Z);t!==this.#st(e,this.#G?.combine)&&k.batch(()=>{this.listeners.forEach(t=>{t(this.#V)})})}}},rt=class extends n{#c;#L=void 0;#it;#nt;constructor(t,e){super(),this.#c=t,this.setOptions(e),this.bindMethods(),this.#ot()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#c.defaultMutationOptions(t),g(this.options,e)||this.#c.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#it,observer:this}),e?.mutationKey&&this.options.mutationKey&&m(e.mutationKey)!==m(this.options.mutationKey)?this.reset():"pending"===this.#it?.state.status&&this.#it.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#it?.removeObserver(this)}onMutationUpdate(t){this.#ot(),this.#W(t)}getCurrentResult(){return this.#L}reset(){this.#it?.removeObserver(this),this.#it=void 0,this.#ot(),this.#W()}mutate(t,e){return this.#nt=e,this.#it?.removeObserver(this),this.#it=this.#c.getMutationCache().build(this.#c,this.options),this.#it.addObserver(this),this.#it.execute(t)}#ot(){const t=this.#it?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#L={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#W(t){k.batch(()=>{if(this.#nt&&this.hasListeners()){const e=this.#L.variables,s=this.#L.context;"success"===t?.type?(this.#nt.onSuccess?.(t.data,e,s),this.#nt.onSettled?.(t.data,null,e,s)):"error"===t?.type&&(this.#nt.onError?.(t.error,e,s),this.#nt.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#L)})})}},it=t.createContext(void 0),nt=e=>{const s=t.useContext(it);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},ot=({client:s,children:r})=>(t.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(it.Provider,{value:s,children:r})),at=t.createContext(!1),ct=()=>t.useContext(at);at.Provider;var ut=t.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),ht=()=>t.useContext(ut),lt=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},dt=e=>{t.useEffect(()=>{e.clearReset()},[e])},pt=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&void 0===t.data||M(s,[t.error,r])),ft=(t,e)=>void 0===e.state.data,mt=t=>{if(t.suspense){const e=t=>"static"===t?t:Math.max(t??1e3,1e3),s=t.staleTime;t.staleTime="function"==typeof s?(...t)=>e(s(...t)):e(s),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,1e3))}},yt=(t,e)=>t.isLoading&&t.isFetching&&!e,vt=(t,e)=>t?.suspense&&e.isPending,gt=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function bt({queries:e,...s},r){const i=nt(),n=ct(),o=ht(),c=t.useMemo(()=>e.map(t=>{const e=i.defaultQueryOptions(t);return e._optimisticResults=n?"isRestoring":"optimistic",e}),[e,i,n]);c.forEach(t=>{mt(t),lt(t,o)}),dt(o);const[u]=t.useState(()=>new st(i,c,s)),[h,l,d]=u.getOptimisticResult(c,s.combine),p=!n&&!1!==s.subscribed;t.useSyncExternalStore(t.useCallback(t=>p?u.subscribe(k.batchCalls(t)):a,[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),t.useEffect(()=>{u.setQueries(c,s)},[c,s,u]);const f=h.some((t,e)=>vt(c[e],t))?h.flatMap((t,e)=>{const s=c[e];if(s){const e=new J(i,s);if(vt(s,t))return gt(s,e,o);yt(t,n)&&gt(s,e,o)}return[]}):[];if(f.length>0)throw Promise.all(f);const m=h.find((t,e)=>{const s=c[e];return s&&pt({result:t,errorResetBoundary:o,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash),suspense:s.suspense})});if(m?.error)throw m.error;return l(d())}function St(e,s,r){const i=ct(),n=ht(),c=nt(),u=c.defaultQueryOptions(e);c.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=i?"isRestoring":"optimistic",mt(u),lt(u,n),dt(n);const h=!c.getQueryCache().get(u.queryHash),[l]=t.useState(()=>new s(c,u)),d=l.getOptimisticResult(u),p=!i&&!1!==e.subscribed;if(t.useSyncExternalStore(t.useCallback(t=>{const e=p?l.subscribe(k.batchCalls(t)):a;return l.updateResult(),e},[l,p]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),t.useEffect(()=>{l.setOptions(u)},[u,l]),vt(u,d))throw gt(u,l,n);if(pt({result:d,errorResetBoundary:n,throwOnError:u.throwOnError,query:c.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw d.error;if(c.getDefaultOptions().queries?._experimental_afterQuery?.(u,d),u.experimental_prefetchInRender&&!o&&yt(d,i)){const t=h?gt(u,l,n):c.getQueryCache().get(u.queryHash)?.promise;t?.catch(a).finally(()=>{l.updateResult()})}return u.notifyOnChangeProps?d:l.trackResult(d)}function Rt(t,e){return St(t,J)}function Ct(t,e){return St({...t,enabled:!0,suspense:!0,throwOnError:ft,placeholderData:void 0},J)}function wt(t){return t}function Ot(e,s){const r=nt(),i=r.getQueryCache();return t.useSyncExternalStore(t.useCallback(t=>i.subscribe(k.batchCalls(t)),[i]),()=>r.isFetching(e),()=>r.isFetching(e))}function _t(e,s){const r=nt(),[i]=t.useState(()=>new rt(r,e));t.useEffect(()=>{i.setOptions(e)},[i,e]);const n=t.useSyncExternalStore(t.useCallback(t=>i.subscribe(k.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=t.useCallback((t,e)=>{i.mutate(t,e).catch(a)},[i]);if(n.error&&M(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}const Pt="pushstate",xt="popstate",Mt="beforeunload",Lt=t=>(t.preventDefault(),t.returnValue="");function Et(t){let e=t.getLocation();const s=new Set;let r=[];const i=()=>{e=t.getLocation(),s.forEach(t=>t())},n=async(e,s)=>{var n;if(!((null==s?void 0:s.ignoreBlocker)??!1)&&"undefined"!=typeof document&&r.length)for(const o of r){if(!(await o()))return void(null==(n=t.onBlocked)||n.call(t,i))}e()};return{get location(){return e},get length(){return t.getLength()},subscribers:s,subscribe:t=>(s.add(t),()=>{s.delete(t)}),push:(e,s,r)=>{s=It(s),n(()=>{t.pushState(e,s),i()},r)},replace:(e,s,r)=>{s=It(s),n(()=>{t.replaceState(e,s),i()},r)},go:(e,s)=>{n(()=>{t.go(e),i()},s)},back:e=>{n(()=>{t.back(),i()},e)},forward:e=>{n(()=>{t.forward(),i()},e)},createHref:e=>t.createHref(e),block:t=>(r.push(t),1===r.length&&addEventListener(Mt,Lt,{capture:!0}),()=>{r=r.filter(e=>e!==t),r.length||removeEventListener(Mt,Lt,{capture:!0})}),flush:()=>{var e;return null==(e=t.flush)?void 0:e.call(t)},destroy:()=>{var e;return null==(e=t.destroy)?void 0:e.call(t)},notify:i}}function It(t){return t||(t={}),{...t,key:(Math.random()+1).toString(36).substring(7)}}function Ft(t,e){const s=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,s>0?r>0?Math.min(s,r):s:r>0?r:t.length),hash:s>-1?t.substring(s):"",search:r>-1?t.slice(r,-1===s?void 0:s):"",state:e||{}}}function Tt(t,e){if(!t)throw new Error("Invariant failed")}const jt=t.createContext(null);function Dt(){return"undefined"==typeof document?jt:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=jt,jt)}function Qt(e){const s=t.useContext(Dt());return null==e||e.warn,s}var qt,kt,At={exports:{}},Ut={};var Kt=(kt||(kt=1,At.exports=function(){if(qt)return Ut;qt=1;var t=s(),e=i(),r="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},n=e.useSyncExternalStore,o=t.useRef,a=t.useEffect,c=t.useMemo,u=t.useDebugValue;return Ut.useSyncExternalStoreWithSelector=function(t,e,s,i,h){var l=o(null);if(null===l.current){var d={hasValue:!1,value:null};l.current=d}else d=l.current;l=c(function(){function t(t){if(!a){if(a=!0,n=t,t=i(t),void 0!==h&&d.hasValue){var e=d.value;if(h(e,t))return o=e}return o=t}if(e=o,r(n,t))return e;var s=i(t);return void 0!==h&&h(e,s)?(n=t,e):(n=t,o=s)}var n,o,a=!1,c=void 0===s?null:s;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]},[e,s,i,h]);var p=n(t,l[0],l[1]);return a(function(){d.hasValue=!0,d.value=p},[p]),u(p),p},Ut}()),At.exports);class Bt{constructor(t,e){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=t=>{var e,s;this.listeners.add(t);const r=null==(s=null==(e=this.options)?void 0:e.onSubscribe)?void 0:s.call(e,t,this);return()=>{this.listeners.delete(t),null==r||r()}},this.setState=t=>{var e,s,r;const i=this.state;this.state=(null==(e=this.options)?void 0:e.updateFn)?this.options.updateFn(i)(t):t(i),null==(r=null==(s=this.options)?void 0:s.onUpdate)||r.call(s),this._flush()},this._flush=()=>{if(this._batching)return;const t=++this._flushing;this.listeners.forEach(e=>{this._flushing===t&&e()})},this.batch=t=>{if(this._batching)return t();this._batching=!0,t(),this._batching=!1,this._flush()},this.state=t,this.options=e}}function Nt(t,e){if(Object.is(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[s,r]of t)if(!e.has(s)||!Object.is(r,e.get(s)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0}const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!1;for(let r=0;r<s.length;r++)if(!Object.prototype.hasOwnProperty.call(e,s[r])||!Object.is(t[s[r]],e[s[r]]))return!1;return!0}const $t="__root__";function zt(t){if(!t)return"";const e=decodeURIComponent(t);return"false"!==e&&("true"===e||(0*+e==0&&+e+""===e?+e:e))}const Ht=(Wt=JSON.parse,t=>{"?"===t.substring(0,1)&&(t=t.substring(1));const e=function(t){let e,s;const r={},i=t.split("&");for(;e=i.shift();){const t=e.indexOf("=");if(-1!==t){s=e.slice(0,t),s=decodeURIComponent(s);const i=e.slice(t+1);void 0!==r[s]?r[s]=[].concat(r[s],zt(i)):r[s]=zt(i)}else s=e,s=decodeURIComponent(s),r[s]=""}return r}(t);for(const r in e){const t=e[r];if("string"==typeof t)try{e[r]=Wt(t)}catch(s){}}return e});var Wt;const Vt=function(t,e){return s=>{s={...s},Object.keys(s).forEach(r=>{const i=s[r];void 0===i||void 0===i?delete s[r]:s[r]=function(s){if("object"==typeof s&&null!==s)try{return t(s)}catch(r){}else if("string"==typeof s&&"function"==typeof e)try{return e(s),t(s)}catch(r){}return s}(i)});const r=function(t){let e,s,r,i="";for(e in t)if(void 0!==(r=t[e]))if(Array.isArray(r))for(s=0;s<r.length;s++)i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(r[s]);else i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(r);return""+i}(s).toString();return r?`?${r}`:""}}(JSON.stringify,JSON.parse);function Gt(t){return t[t.length-1]}function Jt(t,e){return"function"==typeof t?t(e):t}function Xt(t,e){return e.reduce((e,s)=>(e[s]=t[s],e),{})}function Yt(t,e){if(t===e)return t;const s=e,r=ee(t)&&ee(s);if(r||Zt(t)&&Zt(s)){const e=r?t:Object.keys(t),i=e.length,n=r?s:Object.keys(s),o=n.length,a=r?[]:{};let c=0;for(let u=0;u<o;u++){const i=r?u:n[u];(!r&&e.includes(i)||r)&&void 0===t[i]&&void 0===s[i]?(a[i]=void 0,c++):(a[i]=Yt(t[i],s[i]),a[i]===t[i]&&void 0!==t[i]&&c++)}return i===o&&c===i?t:a}return s}function Zt(t){if(!te(t))return!1;const e=t.constructor;if(void 0===e)return!0;const s=e.prototype;return!!te(s)&&!!s.hasOwnProperty("isPrototypeOf")}function te(t){return"[object Object]"===Object.prototype.toString.call(t)}function ee(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function se(t,e){let s=Object.keys(t);return e&&(s=s.filter(e=>void 0!==t[e])),s}function re(t,e,s){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Zt(t)&&Zt(e)){const r=(null==s?void 0:s.ignoreUndefined)??!0,i=se(t,r),n=se(e,r);return!(!(null==s?void 0:s.partial)&&i.length!==n.length)&&n.every(r=>re(t[r],e[r],s))}return!(!Array.isArray(t)||!Array.isArray(e))&&(t.length===e.length&&!t.some((t,r)=>!re(t,e[r],s)))}const ie="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function ne(t){let e,s;const r=new Promise((t,r)=>{e=t,s=r});return r.status="pending",r.resolve=s=>{r.status="resolved",r.value=s,e(s),null==t||t(s)},r.reject=t=>{r.status="rejected",s(t)},r}function oe(e){const s=t.useRef({value:e,prev:null}),r=s.current.value;return e!==r&&(s.current={value:e,prev:r}),s.current.prev}function ae(t){return ce(t.filter(t=>void 0!==t).join("/"))}function ce(t){return t.replace(/\/{2,}/g,"/")}function ue(t){return"/"===t?t:t.replace(/^\/{1,}/,"")}function he(t){return"/"===t?t:t.replace(/\/{1,}$/,"")}function le(t,e){return t.endsWith("/")&&"/"!==t&&t!==`${e}/`?t.slice(0,-1):t}function de(t){if(!t)return[];const e=[];if("/"===(t=ce(t)).slice(0,1)&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const s=t.split("/").filter(Boolean);return e.push(...s.map(t=>"$"===t||"*"===t?{type:"wildcard",value:t}:"$"===t.charAt(0)?{type:"param",value:t}:{type:"pathname",value:decodeURI(t)})),"/"===t.slice(-1)&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function pe({path:t,params:e,leaveWildcards:s,leaveParams:r,decodeCharMap:i}){const n=de(t),o={};for(const[a,c]of Object.entries(e)){const t="string"==typeof c;["*","_splat"].includes(a)?o[a]=t?encodeURI(c):c:o[a]=t?fe(c,i):c}return ae(n.map(t=>{if("wildcard"===t.type){const e=o._splat;return s?`${t.value}${e??""}`:e}if("param"===t.type){if(r){const e=o[t.value];return`${t.value}${e??""}`}return o[t.value.substring(1)]??"undefined"}return t.value}))}function fe(t,e){let s=encodeURIComponent(t);if(e)for(const[r,i]of e)s=s.replaceAll(r,i);return s}function me(t,e,s){const r=function(t,e,s){if("/"!==t&&!e.startsWith(t))return;e=ye(t,e,s.caseSensitive);const r=ye(t,`${s.to??"$"}`,s.caseSensitive),i=de(e),n=de(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"});r.startsWith("/")||n.unshift({type:"pathname",value:"/"});const o={},a=(()=>{for(let t=0;t<Math.max(i.length,n.length);t++){const e=i[t],r=n[t],a=t>=i.length-1,c=t>=n.length-1;if(r){if("wildcard"===r.type){const e=decodeURI(ae(i.slice(t).map(t=>t.value)));return o["*"]=e,o._splat=e,!0}if("pathname"===r.type){if("/"===r.value&&!(null==e?void 0:e.value))return!0;if(e)if(s.caseSensitive){if(r.value!==e.value)return!1}else if(r.value.toLowerCase()!==e.value.toLowerCase())return!1}if(!e)return!1;if("param"===r.type){if("/"===e.value)return!1;"$"!==e.value.charAt(0)&&(o[r.value.substring(1)]=decodeURIComponent(e.value))}}if(!a&&c)return o["**"]=ae(i.slice(t+1).map(t=>t.value)),!!s.fuzzy&&"/"!==(null==r?void 0:r.value)}return!0})();return a?o:void 0}(t,e,s);if(!s.to||r)return r??{}}function ye(t,e,s=!1){const r=s?t:t.toLowerCase(),i=s?e:e.toLowerCase();switch(!0){case"/"===r:return e;case i===r:return"";case e.length<t.length:case"/"!==i[r.length]:return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function ve(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},t.throw)throw t;return t}function ge(t){return!!(null==t?void 0:t.isRedirect)}function be(t){return!!(null==t?void 0:t.isRedirect)&&t.href}function Se(s){const r=s.errorComponent??Ce;return e.jsx(Re,{getResetKey:s.getResetKey,onCatch:s.onCatch,children:({error:e,reset:i})=>e?t.createElement(r,{error:e,reset:i}):s.children})}class Re extends t.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,e){e.error&&e.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,e){this.props.onCatch&&this.props.onCatch(t,e)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Ce({error:s}){const[r,i]=t.useState(!1);return e.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[e.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),e.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>i(t=>!t),children:r?"Hide Error":"Show Error"})]}),e.jsx("div",{style:{height:".25rem"}}),r?e.jsx("div",{children:e.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:s.message?e.jsx("code",{children:s.message}):null})}):null]})}function we(t){const e=Qt({warn:void 0===(null==t?void 0:t.router)});return function(t,e=t=>t){return Kt.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,Nt)}(((null==t?void 0:t.router)||e).__store,null==t?void 0:t.select)}function Oe(t){return!!(null==t?void 0:t.isNotFound)}function _e(t){const s=we({select:t=>`not-found-${t.location.pathname}-${t.status}`});return e.jsx(Se,{getResetKey:()=>s,onCatch:(e,s)=>{var r;if(!Oe(e))throw e;null==(r=t.onCatch)||r.call(t,e,s)},errorComponent:({error:e})=>{var s;if(Oe(e))return null==(s=t.fallback)?void 0:s.call(t,e);throw e},children:t.children})}function Pe(){return e.jsx("p",{children:"Not Found"})}const xe={stringify:t=>JSON.stringify(t,function(t,e){const s=this[t],r=Me.find(t=>t.stringifyCondition(s));return r?r.stringify(s):e}),parse:t=>JSON.parse(t,function(t,e){const s=this[t],r=Me.find(t=>t.parseCondition(s));return r?r.parse(s):e})},Me=[{stringifyCondition:t=>t instanceof Date,stringify:t=>({$date:t.toISOString()}),parseCondition:t=>Zt(t)&&t.$date,parse:t=>new Date(t.$date)},{stringifyCondition:t=>void 0===t,stringify:()=>({$undefined:""}),parseCondition:t=>Zt(t)&&""===t.$undefined,parse:()=>{}}],Le=["component","errorComponent","pendingComponent","notFoundComponent"];function Ee(t,e){if(null==t)return{};if("~validate"in t){const s=t["~validate"]({value:e});if("value"in s)return s.value;throw new Te(JSON.stringify(s.issues,void 0,2))}return"parse"in t?t.parse(e):"function"==typeof t?t(e):{}}function Ie(t){return new Fe(t)}class Fe{constructor(t){this.tempLocationKey=`${Math.round(1e7*Math.random())}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.subscribers=new Set,this.startReactTransition=t=>t(),this.update=t=>{t.notFoundRoute;const e=this.options;var s,r;this.options={...this.options,...t},this.isServer=this.options.isServer??"undefined"==typeof document,this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(t=>[encodeURIComponent(t),t])):void 0,(!this.basepath||t.basepath&&t.basepath!==e.basepath)&&(void 0===t.basepath||""===t.basepath||"/"===t.basepath?this.basepath="/":this.basepath=`/${s=t.basepath,he(ue(s))}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?function(t={initialEntries:["/"]}){const e=t.initialEntries;let s=t.initialIndex??e.length-1;const r=e.map(()=>({}));return Et({getLocation:()=>Ft(e[s],r[s]),getLength:()=>e.length,pushState:(t,i)=>{s<e.length-1&&(e.splice(s+1),r.splice(s+1)),r.push(i),e.push(t),s=Math.max(e.length-1,0)},replaceState:(t,i)=>{r[s]=i,e[s]=t},back:()=>{s=Math.max(s-1,0)},forward:()=>{s=Math.min(s+1,e.length-1)},go:t=>{s=Math.min(Math.max(s+t,0),e.length-1)},createHref:t=>t})}({initialEntries:[this.basepath||"/"]}):function(){const t="undefined"!=typeof document?window:void 0,e=t.history.pushState,s=t.history.replaceState,r=()=>Ft(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);let i,n,o,a=r();const c=()=>{n&&(l._ignoreSubscribers=!0,(n.isPush?t.history.pushState:t.history.replaceState)(n.state,"",n.href),l._ignoreSubscribers=!1,n=void 0,o=void 0,i=void 0)},u=(t,e,s)=>{const r=e;o||(i=a),a=Ft(e,s),n={href:r,state:s,isPush:(null==n?void 0:n.isPush)||"push"===t},o||(o=Promise.resolve().then(()=>c()))},h=()=>{a=r(),l.notify()},l=Et({getLocation:()=>a,getLength:()=>t.history.length,pushState:(t,e)=>u("push",t,e),replaceState:(t,e)=>u("replace",t,e),back:()=>t.history.back(),forward:()=>t.history.forward(),go:e=>t.history.go(e),createHref:t=>t,flush:c,destroy:()=>{t.history.pushState=e,t.history.replaceState=s,t.removeEventListener(Pt,h),t.removeEventListener(xt,h)},onBlocked:t=>{i&&a!==i&&(a=i,t())}});return t.addEventListener(Pt,h),t.addEventListener(xt,h),t.history.pushState=function(...s){const r=e.apply(t.history,s);return l._ignoreSubscribers||h(),r},t.history.replaceState=function(...e){const r=s.apply(t.history,e);return l._ignoreSubscribers||h(),r},l}()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Bt((r=this.latestLocation,{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...r},location:r,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(t=>!["redirected"].includes(t.status))}}}))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const t=this.options.notFoundRoute;t&&(t.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[t.id]=t);const e=t=>{t.forEach((t,s)=>{t.init({originalIndex:s,defaultSsr:this.options.defaultSsr});if(Tt(!this.routesById[t.id],String(t.id)),this.routesById[t.id]=t,!t.isRoot&&t.path){const e=he(t.fullPath);this.routesByPath[e]&&!t.fullPath.endsWith("/")||(this.routesByPath[e]=t)}const r=t.children;(null==r?void 0:r.length)&&e(r)})};e([this.routeTree]);const s=[];Object.values(this.routesById).forEach((t,e)=>{var r;if(t.isRoot||!t.path)return;const i=ue(t.fullPath),n=de(i);for(;n.length>1&&"/"===(null==(r=n[0])?void 0:r.value);)n.shift();const o=n.map(t=>"/"===t.value?.75:"param"===t.type?.5:"wildcard"===t.type?.25:1);s.push({child:t,trimmed:i,parsed:n,index:e,scores:o})}),this.flatRoutes=s.sort((t,e)=>{const s=Math.min(t.scores.length,e.scores.length);for(let r=0;r<s;r++)if(t.scores[r]!==e.scores[r])return e.scores[r]-t.scores[r];if(t.scores.length!==e.scores.length)return e.scores.length-t.scores.length;for(let r=0;r<s;r++)if(t.parsed[r].value!==e.parsed[r].value)return t.parsed[r].value>e.parsed[r].value?1:-1;return t.index-e.index}).map((t,e)=>(t.child.rank=e,t.child))},this.subscribe=(t,e)=>{const s={eventType:t,fn:e};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=t=>{this.subscribers.forEach(e=>{e.eventType===t.type&&e.fn(t)})},this.parseLocation=t=>{const e=({pathname:e,search:s,hash:r,state:i})=>{const n=this.options.parseSearch(s),o=this.options.stringifySearch(n);return{pathname:e,searchStr:o,search:Yt(null==t?void 0:t.search,n),hash:r.split("#").reverse()[0]??"",href:`${e}${o}${r}`,state:Yt(null==t?void 0:t.state,i)}},s=e(this.history.location),{__tempLocation:r,__tempKey:i}=s.state;if(r&&(!i||i===this.tempLocationKey)){const t=e(r);return t.state.key=s.state.key,delete t.state.__tempLocation,{...t,maskedLocation:s}}return s},this.resolvePathWithBase=(t,e)=>function({basepath:t,base:e,to:s,trailingSlash:r="never",caseSensitive:i}){var n,o;e=ye(t,e,i),s=ye(t,s,i);let a=de(e);const c=de(s);return a.length>1&&"/"===(null==(n=Gt(a))?void 0:n.value)&&a.pop(),c.forEach((t,e)=>{"/"===t.value?e?e===c.length-1&&a.push(t):a=[t]:".."===t.value?a.pop():"."===t.value||a.push(t)}),a.length>1&&("/"===(null==(o=Gt(a))?void 0:o.value)?"never"===r&&a.pop():"always"===r&&a.push({type:"pathname",value:"/"})),ce(ae([t,...a.map(t=>t.value)]))}({basepath:this.basepath,base:t,to:ce(e),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(t,e)=>{let s={};const r=he(t.pathname),i=t=>me(this.basepath,r,{to:t.fullPath,caseSensitive:t.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let n=void 0!==(null==e?void 0:e.to)?this.routesByPath[e.to]:void 0;n?s=i(n):n=this.flatRoutes.find(t=>{const e=i(t);return!!e&&(s=e,!0)});let o=n||this.routesById[$t];const a=[o];for(;o.parentRoute;)o=o.parentRoute,a.unshift(o);return{matchedRoutes:a,routeParams:s,foundRoute:n}},this.cancelMatch=t=>{const e=this.getMatch(t);e&&(e.abortController.abort(),clearTimeout(e.pendingTimeout))},this.cancelMatches=()=>{var t;null==(t=this.state.pendingMatches)||t.forEach(t=>{this.cancelMatch(t.id)})},this.buildLocation=t=>{const e=(e={},s)=>{var r,i,n,o,a,c;const u=e._fromLocation?this.matchRoutes(e._fromLocation,{_buildLocation:!0}):this.state.matches,h=null!=e.from?u.find(t=>me(this.basepath,he(t.pathname),{to:e.from,caseSensitive:!1,fuzzy:!1})):void 0,l=(null==h?void 0:h.pathname)||this.latestLocation.pathname;Tt(null==e.from||null!=h,e.from);const d=(null==(r=this.state.pendingMatches)?void 0:r.length)?null==(i=Gt(this.state.pendingMatches))?void 0:i.search:(null==(n=Gt(u))?void 0:n.search)||this.latestLocation.search,p=null==s?void 0:s.matchedRoutes.filter(t=>u.find(e=>e.routeId===t.id));let f;if(e.to)f=this.resolvePathWithBase(l,`${e.to}`);else{const t=this.routesById[null==(o=null==p?void 0:p.find(t=>{const e=pe({path:t.fullPath,params:(null==s?void 0:s.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap});return ae([this.basepath,e])===l}))?void 0:o.id];f=this.resolvePathWithBase(l,(null==t?void 0:t.to)??l)}const m={...null==(a=Gt(u))?void 0:a.params};let y=!0===(e.params??!0)?m:{...m,...Jt(e.params,m)};Object.keys(y).length>0&&(null==s||s.matchedRoutes.map(t=>{var e;return(null==(e=t.options.params)?void 0:e.stringify)??t.options.stringifyParams}).filter(Boolean).forEach(t=>{y={...y,...t(y)}})),f=pe({path:f,params:y??{},leaveWildcards:!1,leaveParams:t.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let v=d;if(t._includeValidateSearch){let t=(null==(c=this.options.search)?void 0:c.strict)?{}:v;null==s||s.matchedRoutes.forEach(e=>{try{e.options.validateSearch&&(t={...t,...Ee(e.options.validateSearch,{...t,...v})??{}})}catch(s){}}),v=t}v=(t=>{const r=(null==s?void 0:s.matchedRoutes.reduce((t,e)=>{var s;let r=[];if("search"in e.options)(null==(s=e.options.search)?void 0:s.middlewares)&&(r=e.options.search.middlewares);else if(e.options.preSearchFilters||e.options.postSearchFilters){r=[({search:t,next:s})=>{let r=t;"preSearchFilters"in e.options&&e.options.preSearchFilters&&(r=e.options.preSearchFilters.reduce((t,e)=>e(t),t));const i=s(r);return"postSearchFilters"in e.options&&e.options.postSearchFilters?e.options.postSearchFilters.reduce((t,e)=>e(t),i):i}]}return t.concat(r)},[]))??[];r.push(({search:t})=>e.search?!0===e.search?t:Jt(e.search,t):{});const i=(t,e)=>{if(t>=r.length)return e;return(0,r[t])({search:e,next:e=>i(t+1,e)})};return i(0,t)})(v),v=Yt(d,v);const g=this.options.stringifySearch(v),b=!0===e.hash?this.latestLocation.hash:e.hash?Jt(e.hash,this.latestLocation.hash):void 0,S=b?`#${b}`:"";let R=!0===e.state?this.latestLocation.state:e.state?Jt(e.state,this.latestLocation.state):{};return R=Yt(this.latestLocation.state,R),{pathname:f,search:v,searchStr:g,state:R,hash:b??"",href:`${f}${g}${S}`,unmaskOnReload:e.unmaskOnReload}},s=(s={},r)=>{var i;const n=e(s);let o=r?e(r):void 0;if(!o){let s={};const a=null==(i=this.options.routeMasks)?void 0:i.find(t=>{const e=me(this.basepath,n.pathname,{to:t.from,caseSensitive:!1,fuzzy:!1});return!!e&&(s=e,!0)});if(a){const{from:i,...n}=a;r={...Xt(t,["from"]),...n,params:s},o=e(r)}}const a=this.getMatchedRoutes(n,s),c=e(s,a);if(o){const t=this.getMatchedRoutes(o,r),s=e(r,t);c.maskedLocation=s}return c};return t.mask?s(t,{...Xt(t,["from"]),...t.mask}):s(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:e,...s})=>{const r=this.latestLocation.href===s.href,i=this.commitLocationPromise;if(this.commitLocationPromise=ne(()=>{null==i||i.resolve()}),r&&(()=>{s.state.key=this.latestLocation.state.key;const t=re(s.state,this.latestLocation.state);return delete s.state.key,t})())this.load();else{let{maskedLocation:r,...i}=s;r&&(i={...r,state:{...r.state,__tempKey:void 0,__tempLocation:{...i,search:i.searchStr,state:{...i.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(i.unmaskOnReload??this.options.unmaskOnReload)&&(i.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=t,this.history[s.replace?"replace":"push"](i.href,i.state,{ignoreBlocker:e})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:e,viewTransition:s,ignoreBlocker:r,...i}={})=>{const n=i.href;if(n){const t=Ft(n,{});i.to=t.pathname,i.search=this.options.parseSearch(t.search),i.hash=t.hash.slice(1)}const o=this.buildLocation({...i,_includeValidateSearch:!0});return this.commitLocation({...o,viewTransition:s,replace:t,resetScroll:e,ignoreBlocker:r})},this.navigate=({to:t,...e})=>{const s=String(t);let r;try{new URL(`${s}`),r=!0}catch(i){}return Tt(!r),this.buildAndCommitLocation({...e,to:t})},this.load=async()=>{let t,e,s;for(this.latestLocation=this.parseLocation(this.latestLocation),s=new Promise(r=>{this.startReactTransition(async()=>{var i;try{const t=this.latestLocation,e=this.state.resolvedLocation,s=e.href!==t.href;let r;this.cancelMatches(),this.__store.batch(()=>{r=this.matchRoutes(t),this.__store.setState(e=>({...e,status:"pending",isLoading:!0,location:t,pendingMatches:r,cachedMatches:e.cachedMatches.filter(t=>!r.find(e=>e.id===t.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:e,toLocation:t,pathChanged:s}),this.emit({type:"onBeforeLoad",fromLocation:e,toLocation:t,pathChanged:s}),await this.loadMatches({matches:r,location:t,onReady:async()=>{this.startViewTransition(async()=>{let t,e,s;this.__store.batch(()=>{this.__store.setState(r=>{const i=r.matches,n=r.pendingMatches||r.matches;return t=i.filter(t=>!n.find(e=>e.id===t.id)),e=n.filter(t=>!i.find(e=>e.id===t.id)),s=i.filter(t=>n.find(e=>e.id===t.id)),{...r,isLoading:!1,loadedAt:Date.now(),matches:n,pendingMatches:void 0,cachedMatches:[...r.cachedMatches,...t.filter(t=>"error"!==t.status)]}}),this.clearExpiredCache()}),[[t,"onLeave"],[e,"onEnter"],[s,"onStay"]].forEach(([t,e])=>{t.forEach(t=>{var s,r;null==(r=(s=this.looseRoutesById[t.routeId].options)[e])||r.call(s,t)})})})}})}catch(n){be(n)?(t=n,this.isServer||this.navigate({...n,replace:!0,ignoreBlocker:!0})):Oe(n)&&(e=n),this.__store.setState(s=>({...s,statusCode:t?t.statusCode:e?404:s.matches.some(t=>"error"===t.status)?500:200,redirect:t}))}this.latestLoadPromise===s&&(null==(i=this.commitLocationPromise)||i.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),r()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=t=>{const e=this.shouldViewTransition??this.options.defaultViewTransition;delete this.shouldViewTransition,e&&"undefined"!=typeof document&&"startViewTransition"in document&&"function"==typeof document.startViewTransition?document.startViewTransition(t):t()},this.updateMatch=(t,e)=>{var s;let r;const i=null==(s=this.state.pendingMatches)?void 0:s.find(e=>e.id===t),n=this.state.matches.find(e=>e.id===t),o=i?"pendingMatches":n?"matches":"cachedMatches";return this.__store.setState(s=>{var i;return{...s,[o]:null==(i=s[o])?void 0:i.map(s=>s.id===t?r=e(s):s)}}),r},this.getMatch=t=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(e=>e.id===t),this.loadMatches=async({location:t,matches:e,preload:s,onReady:r,updateMatch:i=this.updateMatch})=>{let n,o=!1;const a=async()=>{o||(o=!0,await(null==r?void 0:r()))};this.isServer||this.state.matches.length||a();const c=(s,r)=>{var n,a,c;if(be(r))throw r;if(ge(r)||Oe(r)){if(i(s.id,t=>({...t,status:ge(r)?"redirected":Oe(r)?"notFound":"error",isFetching:!1,error:r,beforeLoadPromise:void 0,loaderPromise:void 0})),r.routeId||(r.routeId=s.routeId),null==(n=s.beforeLoadPromise)||n.resolve(),null==(a=s.loaderPromise)||a.resolve(),null==(c=s.loadPromise)||c.resolve(),ge(r))throw o=!0,r=this.resolveRedirect({...r,_fromLocation:t});if(Oe(r))throw this._handleNotFound(e,r,{updateMatch:i}),r}};try{await new Promise((o,u)=>{(async()=>{var h,l,d;try{const u=(t,s,r)=>{var o,a;const{id:u,routeId:h}=e[t],l=this.looseRoutesById[h];if(s instanceof Promise)throw s;s.routerCode=r,n=n??t,c(this.getMatch(u),s);try{null==(a=(o=l.options).onError)||a.call(o,s)}catch(d){s=d,c(this.getMatch(u),s)}i(u,t=>{var e,r;return null==(e=t.beforeLoadPromise)||e.resolve(),null==(r=t.loadPromise)||r.resolve(),{...t,error:s,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[n,{id:o,routeId:c}]of e.entries()){const f=this.getMatch(o),m=null==(h=e[n-1])?void 0:h.id,y=this.looseRoutesById[c],v=y.options.pendingMs??this.options.defaultPendingMs,g=!(!r||this.isServer||s||!y.options.loader&&!y.options.beforeLoad||"number"!=typeof v||v===1/0||!(y.options.pendingComponent??this.options.defaultPendingComponent));if(f.beforeLoadPromise||f.loaderPromise)g&&setTimeout(()=>{try{a()}catch{}},v),await f.beforeLoadPromise;else{try{i(o,t=>({...t,loadPromise:ne(()=>{var e;null==(e=t.loadPromise)||e.resolve()}),beforeLoadPromise:ne()}));const r=new AbortController;let c;g&&(c=setTimeout(()=>{try{a()}catch{}},v));const{paramsError:h,searchError:p}=this.getMatch(o);h&&u(n,h,"PARSE_PARAMS"),p&&u(n,p,"VALIDATE_SEARCH");const f=()=>m?this.getMatch(m).context:this.options.context??{};i(o,t=>({...t,isFetching:"beforeLoad",fetchCount:t.fetchCount+1,abortController:r,pendingTimeout:c,context:{...f(),...t.__routeContext,...t.__beforeLoadContext}}));const{search:b,params:S,context:R,cause:C}=this.getMatch(o),w={search:b,abortController:r,params:S,preload:!!s,context:R,location:t,navigate:e=>this.navigate({...e,_fromLocation:t}),buildLocation:this.buildLocation,cause:s?"preload":C,matches:e};let O=await(null==(d=(l=y.options).beforeLoad)?void 0:d.call(l,w))??{};this.serializeLoaderData&&(O=this.serializeLoaderData("__beforeLoadContext",O,{router:this,match:this.getMatch(o)})),(ge(O)||Oe(O))&&u(n,O,"BEFORE_LOAD"),i(o,t=>({...t,__beforeLoadContext:O,context:{...f(),...t.__routeContext,...O},abortController:r}))}catch(p){u(n,p,"BEFORE_LOAD")}i(o,t=>{var e;return null==(e=t.beforeLoadPromise)||e.resolve(),{...t,beforeLoadPromise:void 0,isFetching:!1}})}}const f=e.slice(0,n),m=[];f.forEach(({id:r,routeId:n},o)=>{m.push((async()=>{const{loaderPromise:a}=this.getMatch(r);let u=!1;if(a)await a;else{const a=m[o-1],h=this.looseRoutesById[n],l=()=>{const{params:e,loaderDeps:i,abortController:n,context:o,cause:c}=this.getMatch(r);return{params:e,deps:i,preload:!!s,parentMatchPromise:a,abortController:n,context:o,location:t,navigate:e=>this.navigate({...e,_fromLocation:t}),cause:s?"preload":c,route:h}},d=Date.now()-this.getMatch(r).updatedAt,f=s?h.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:h.options.staleTime??this.options.defaultStaleTime??0,y=h.options.shouldReload,v="function"==typeof y?y(l()):y;i(r,t=>({...t,loaderPromise:ne(),preload:!!s&&!this.state.matches.find(t=>t.id===r)}));const g=async()=>{var t,s,n,o,a,u,d,f;try{const p=async()=>{const t=this.getMatch(r);t.minPendingPromise&&await t.minPendingPromise};try{void 0===h._lazyPromise&&(h.lazyFn?h._lazyPromise=h.lazyFn().then(t=>{const{id:e,...s}=t.options;Object.assign(h.options,s)}):h._lazyPromise=Promise.resolve()),void 0===h._componentsPromise&&(h._componentsPromise=h._lazyPromise.then(()=>Promise.all(Le.map(async t=>{const e=h.options[t];(null==e?void 0:e.preload)&&await e.preload()})))),i(r,t=>({...t,isFetching:"loader"}));let d=await(null==(s=(t=h.options).loader)?void 0:s.call(t,l()));this.serializeLoaderData&&(d=this.serializeLoaderData("loaderData",d,{router:this,match:this.getMatch(r)})),c(this.getMatch(r),d),await h._lazyPromise,await p();const f=null==(o=(n=h.options).meta)?void 0:o.call(n,{matches:e,match:this.getMatch(r),params:this.getMatch(r).params,loaderData:d}),m=null==(u=(a=h.options).headers)?void 0:u.call(a,{loaderData:d});i(r,t=>({...t,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:d,meta:f,headers:m}))}catch(m){let t=m;await p(),c(this.getMatch(r),m);try{null==(f=(d=h.options).onError)||f.call(d,m)}catch(y){t=y,c(this.getMatch(r),y)}i(r,e=>({...e,error:t,status:"error",isFetching:!1}))}await h._componentsPromise}catch(p){c(this.getMatch(r),p)}},{status:b,invalid:S}=this.getMatch(r);u="success"===b&&(S||(v??d>f)),s&&!1===h.options.preload||(u?(async()=>{try{await g()}catch(p){be(p)&&await this.navigate(p)}})():"success"!==b&&await g());const{loaderPromise:R,loadPromise:C}=this.getMatch(r);null==R||R.resolve(),null==C||C.resolve()}return i(r,t=>({...t,isFetching:!!u&&t.isFetching,loaderPromise:void 0,invalid:!1})),this.getMatch(r)})())}),await Promise.all(m),o()}catch(p){u(p)}})()}),await a()}catch(u){if(ge(u)||Oe(u))throw Oe(u)&&!s&&await a(),u}return e},this.invalidate=t=>{const e=e=>{var s;return(null==(s=null==t?void 0:t.filter)?void 0:s.call(t,e))??1?{...e,invalid:!0,..."error"===e.status?{status:"pending",error:void 0}:{}}:e};return this.__store.setState(t=>{var s;return{...t,matches:t.matches.map(e),cachedMatches:t.cachedMatches.map(e),pendingMatches:null==(s=t.pendingMatches)?void 0:s.map(e)}}),this.load()},this.resolveRedirect=t=>{const e=t;return e.href||(e.href=this.buildLocation(e).href),e},this.clearCache=t=>{const e=null==t?void 0:t.filter;void 0!==e?this.__store.setState(t=>({...t,cachedMatches:t.cachedMatches.filter(t=>!e(t))})):this.__store.setState(t=>({...t,cachedMatches:[]}))},this.clearExpiredCache=()=>{this.clearCache({filter:t=>{const e=this.looseRoutesById[t.routeId];if(!e.options.loader)return!0;const s=(t.preload?e.options.preloadGcTime??this.options.defaultPreloadGcTime:e.options.gcTime??this.options.defaultGcTime)??3e5;return!("error"!==t.status&&Date.now()-t.updatedAt<s)}})},this.preloadRoute=async t=>{const e=this.buildLocation(t);let s=this.matchRoutes(e,{throwOnError:!0,preload:!0,dest:t});const r=Object.fromEntries([...this.state.matches,...this.state.pendingMatches??[],...this.state.cachedMatches].map(t=>[t.id,!0]));this.__store.batch(()=>{s.forEach(t=>{r[t.id]||this.__store.setState(e=>({...e,cachedMatches:[...e.cachedMatches,t]}))})});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(t=>t.id));try{return s=await this.loadMatches({matches:s,location:e,preload:!0,updateMatch:(t,e)=>{i.has(t)?s=s.map(s=>s.id===t?e(s):s):this.updateMatch(t,e)}}),s}catch(n){return ge(n)?await this.preloadRoute({...n,_fromLocation:e}):void 0}},this.matchRoute=(t,e)=>{const s={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},r=this.buildLocation(s);if((null==e?void 0:e.pending)&&"pending"!==this.state.status)return!1;const i=(void 0===(null==e?void 0:e.pending)?!this.state.isLoading:e.pending)?this.latestLocation:this.state.resolvedLocation,n=me(this.basepath,i.pathname,{...e,to:r.pathname});return!!n&&(!(t.params&&!re(n,t.params,{partial:!0}))&&(n&&((null==e?void 0:e.includeSearch)??1)?!!re(i.search,r.search,{partial:!0})&&n:n))},this.dehydrate=()=>{var t;const e=(null==(t=this.options.errorSerializer)?void 0:t.serialize)??De;return{state:{dehydratedMatches:this.state.matches.map(t=>({...Xt(t,["id","status","updatedAt"]),error:t.error?{data:e(t.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var t,e,s;let r;"undefined"!=typeof document&&(r=this.options.transformer.parse(null==(t=window.__TSR__)?void 0:t.dehydrated)),Tt(r),this.dehydratedData=r.payload,null==(s=(e=this.options).hydrate)||s.call(e,r.payload);const i=r.router.state,n=this.matchRoutes(this.state.location).map(t=>{const e=i.dehydratedMatches.find(e=>e.id===t.id);return Tt(e,t.id),{...t,...e}});this.__store.setState(t=>({...t,matches:n})),this.manifest=r.router.manifest},this.injectedHtml=[],this.injectHtml=t=>{const e=()=>(this.injectedHtml=this.injectedHtml.filter(t=>t!==e),t);this.injectedHtml.push(e)},this.streamedKeys=new Set,this.getStreamedValue=t=>{var e;if(this.isServer)return;const s=null==(e=window.__TSR__)?void 0:e.streamedValues[t];return s?(s.parsed||(s.parsed=this.options.transformer.parse(s.value)),s.parsed):void 0},this.streamValue=(t,e)=>{var s;this.streamedKeys.has(t),this.streamedKeys.add(t);const r=`__TSR__.streamedValues['${t}'] = { value: ${null==(s=this.serializer)?void 0:s.call(this,this.options.transformer.stringify(e))}}`;this.injectHtml(`<script class='tsr-once'>${r}; __TSR__.cleanScripts()<\/script>`)},this._handleNotFound=(t,e,{updateMatch:s=this.updateMatch}={})=>{const r=Object.fromEntries(t.map(t=>[t.routeId,t]));let i=(e.global?this.looseRoutesById[$t]:this.looseRoutesById[e.routeId])||this.looseRoutesById[$t];for(;!i.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&i.id!==$t;)i=i.parentRoute,Tt(i);const n=r[i.id];Tt(n,i.id),s(n.id,t=>({...t,status:"notFound",error:e,isFetching:!1})),"BEFORE_LOAD"===e.routerCode&&i.parentRoute&&(e.routeId=i.parentRoute.id,this._handleNotFound(t,e,{updateMatch:s}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>"notFound"===t.status||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??Vt,parseSearch:t.parseSearch??Ht,transformer:t.transformer??xe}),"undefined"!=typeof document&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(t,e,s){return"string"==typeof t?this.matchRoutesInternal({pathname:t,search:e},s):this.matchRoutesInternal(t,e)}matchRoutesInternal(t,e){const{foundRoute:s,matchedRoutes:r,routeParams:i}=this.getMatchedRoutes(t,null==e?void 0:e.dest);let n=!1;(s?"/"!==s.path&&i["**"]:he(t.pathname))&&(this.options.notFoundRoute?r.push(this.options.notFoundRoute):n=!0);const o=(()=>{if(n){if("root"!==this.options.notFoundMode)for(let t=r.length-1;t>=0;t--){const e=r[t];if(e.children)return e.id}return $t}})(),a=r.map(t=>{var s;let r;const n=(null==(s=t.options.params)?void 0:s.parse)??t.options.parseParams;if(n)try{const t=n(i);Object.assign(i,t)}catch(o){if(r=new je(o.message,{cause:o}),null==e?void 0:e.throwOnError)throw r;return r}}),c=[];return r.forEach((s,r)=>{var n,u,h,l,d,p,f,m,y,v,g,b;const S=c[r-1],[R,C]=(()=>{const r=(null==S?void 0:S.search)??t.search;try{const t=Ee(s.options.validateSearch,r)??{};return[{...r,...t},void 0]}catch(i){const t=new Te(i.message,{cause:i});if(null==e?void 0:e.throwOnError)throw t;return[r,t]}})(),w=(null==(u=(n=s.options).loaderDeps)?void 0:u.call(n,{search:R}))??"",O=w?JSON.stringify(w):"",_=pe({path:s.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),P=pe({path:s.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+O,x=this.getMatch(P),M=this.state.matches.find(t=>t.id===P)?"stay":"enter";let L;if(x)L={...x,cause:M,params:i};else{const t=s.options.loader||s.options.beforeLoad||s.lazyFn||function(t){var e;for(const s of Le)if(null==(e=t.options[s])?void 0:e.preload)return!0;return!1}(s)?"pending":"success";L={id:P,index:r,routeId:s.id,params:i,pathname:ae([this.basepath,_]),updatedAt:Date.now(),search:{},searchError:void 0,status:t,isFetching:!1,error:void 0,paramsError:a[r],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:M,loaderDeps:w,invalid:!1,preload:!1,links:null==(l=(h=s.options).links)?void 0:l.call(h),scripts:null==(p=(d=s.options).scripts)?void 0:p.call(d),staticData:s.options.staticData||{},loadPromise:ne(),fullPath:s.fullPath}}"success"===L.status&&(L.meta=null==(m=(f=s.options).meta)?void 0:m.call(f,{matches:c,match:L,params:L.params,loaderData:L.loaderData}),L.headers=null==(v=(y=s.options).headers)?void 0:v.call(y,{loaderData:L.loaderData})),(null==e?void 0:e.preload)||(L.globalNotFound=o===s.id),L.search=Yt(L.search,R),L.searchError=C;const E=(null==S?void 0:S.id)?S.context??this.options.context??{}:this.options.context??{};if(L.context={...E,...L.__routeContext,...L.__beforeLoadContext},!x&&!0!==(null==e?void 0:e._buildLocation)){const e={deps:w,params:L.params,context:L.context,location:t,navigate:e=>this.navigate({...e,_fromLocation:t}),buildLocation:this.buildLocation,cause:L.cause,abortController:L.abortController,preload:!!L.preload,matches:c};L.__routeContext=(null==(b=(g=s.options).context)?void 0:b.call(g,e))??{},L.context={...E,...L.__routeContext,...L.__beforeLoadContext}}c.push(L)}),c}}class Te extends Error{}class je extends Error{}function De(t){if(t instanceof Error){return{name:t.name,message:t.message}}return{data:t}}function Qe(t){return!("object"!=typeof t||!t||!("data"in t))&&(!(!("__isServerError"in t)||!t.__isServerError)&&(!("object"!=typeof t.data||!t.data)&&!0===t.__isServerError))}function qe(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const ke=t.createContext(void 0);function Ae(e){const s=t.useContext(ke);return we({select:t=>{const r=t.matches.find(t=>e.from?e.from===t.routeId:t.id===s);if(Tt(!((e.shouldThrow??1)&&!r),e.from&&e.from),void 0!==r)return e.select?e.select(r):r}})}function Ue(t){return Ae({...t,select:e=>"function"==typeof t.select?t.select(e.loaderDeps):e.loaderDeps})}function Ke(t){return Ae({...t,select:e=>"function"==typeof t.select?t.select(e.loaderData):e.loaderData})}function Be(t){return Ae({...t,select:e=>t.select?t.select(e.params):e.params})}function Ne(t){return Ae({...t,select:e=>t.select?t.select(e.search):e.search})}function $e(e){const{navigate:s}=Qt();return t.useCallback(t=>s({...t}),[s])}function ze(e){const{navigate:s}=Qt();return t.useEffect(()=>{s({...e})},[]),null}function He(t){return new We({id:t})}class We{constructor({id:t}){this.useMatch=t=>Ae({select:null==t?void 0:t.select,from:this.id}),this.useRouteContext=t=>Ae({from:this.id,select:e=>(null==t?void 0:t.select)?t.select(e.context):e.context}),this.useSearch=t=>Ne({...t,from:this.id}),this.useParams=t=>Be({...t,from:this.id}),this.useLoaderDeps=t=>Ue({...t,from:this.id,strict:!1}),this.useLoaderData=t=>Ke({...t,from:this.id,strict:!1}),this.useNavigate=()=>$e(this.id),this.notFound=t=>function(t={}){if(t.isNotFound=!0,t.throw)throw t;return t}({routeId:this.id,...t}),this.id=t}}class Ve{constructor(t){this.init=t=>{var e,s;this.originalIndex=t.originalIndex;const r=this.options,i=!(null==r?void 0:r.path)&&!(null==r?void 0:r.id);this.parentRoute=null==(s=(e=this.options).getParentRoute)?void 0:s.call(e),i?this._path=$t:Tt(this.parentRoute);let n=i?$t:r.path;n&&"/"!==n&&(n=ue(n));const o=(null==r?void 0:r.id)||n;let a=i?$t:ae([this.parentRoute.id===$t?"":this.parentRoute.id,o]);n===$t&&(n="/"),a!==$t&&(a=ae(["/",a]));const c=a===$t?"/":ae([this.parentRoute.fullPath,n]);this._path=n,this._id=a,this._fullPath=c,this._to=c,this._ssr=(null==r?void 0:r.ssr)??t.defaultSsr??!0},this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.useMatch=t=>Ae({...t,from:this.id}),this.useRouteContext=t=>Ae({...t,from:this.id,select:e=>(null==t?void 0:t.select)?t.select(e.context):e.context}),this.useSearch=t=>Ne({...t,from:this.id}),this.useParams=t=>Be({...t,from:this.id}),this.useLoaderDeps=t=>Ue({...t,from:this.id}),this.useLoaderData=t=>Ke({...t,from:this.id}),this.useNavigate=()=>$e(this.id),this.options=t||{},this.isRoot=!(null==t?void 0:t.getParentRoute),Tt(!((null==t?void 0:t.id)&&(null==t?void 0:t.path))),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(t){return this._addFileChildren(t)}_addFileChildren(t){return Array.isArray(t)&&(this.children=t),"object"==typeof t&&null!==t&&(this.children=Object.values(t)),this}}function Ge(){return t=>function(t){return new Je(t)}(t)}class Je extends Ve{constructor(t){super(t)}addChildren(t){return super.addChildren(t),this}_addFileChildren(t){return super._addFileChildren(t),this}_addFileTypes(){return this}}function Xe(t){return new Ye(t,{silent:!0}).createRoute}class Ye{constructor(t,e){this.path=t,this.createRoute=t=>{this.silent;const e=function(t){return new Ve(t)}(t);return e.isRoot=!1,e},this.silent=null==e?void 0:e.silent}}class Ze{constructor(t){this.useMatch=t=>Ae({select:null==t?void 0:t.select,from:this.options.id}),this.useRouteContext=t=>Ae({from:this.options.id,select:e=>(null==t?void 0:t.select)?t.select(e.context):e.context}),this.useSearch=t=>Ne({...t,from:this.options.id}),this.useParams=t=>Be({...t,from:this.options.id}),this.useLoaderDeps=t=>Ue({...t,from:this.options.id}),this.useLoaderData=t=>Ke({...t,from:this.options.id}),this.useNavigate=()=>$e(this.options.id),this.options=t,this.$$typeof=Symbol.for("react.memo")}}function ts(t){return e=>new Ze({id:t,...e})}function es(t){return e.jsx(e.Fragment,{children:t.children})}function ss(t,s,r){return s.options.notFoundComponent?e.jsx(s.options.notFoundComponent,{data:r}):t.options.defaultNotFoundComponent?e.jsx(t.options.defaultNotFoundComponent,{data:r}):e.jsx(Pe,{})}const rs=t.memo(function({matchId:s}){var r,i;const n=Qt(),o=we({select:t=>{var e;return null==(e=t.matches.find(t=>t.id===s))?void 0:e.routeId}});Tt(o);const a=n.routesById[o],c=a.options.pendingComponent??n.options.defaultPendingComponent,u=c?e.jsx(c,{}):null,h=a.options.errorComponent??n.options.defaultErrorComponent,l=a.options.onCatch??n.options.defaultOnCatch,d=a.isRoot?a.options.notFoundComponent??(null==(r=n.options.notFoundRoute)?void 0:r.options.component):a.options.notFoundComponent,p=a.isRoot&&!a.options.wrapInSuspense||!(a.options.wrapInSuspense??c??(null==(i=a.options.errorComponent)?void 0:i.preload))?es:t.Suspense,f=h?Se:es,m=d?_e:es,y=we({select:t=>t.loadedAt});return e.jsx(ke.Provider,{value:s,children:e.jsx(p,{fallback:u,children:e.jsx(f,{getResetKey:()=>y,errorComponent:h||Ce,onCatch:(t,e)=>{if(Oe(t))throw t;null==l||l(t,e)},children:e.jsx(m,{fallback:e=>{if(!d||e.routeId&&e.routeId!==o||!e.routeId&&!a.isRoot)throw e;return t.createElement(d,e)},children:e.jsx(is,{matchId:s})})})})})}),is=t.memo(function({matchId:s}){var r,i,n;const o=Qt(),{match:a,matchIndex:c,routeId:u}=we({select:t=>{const e=t.matches.findIndex(t=>t.id===s),r=t.matches[e];return{routeId:r.routeId,matchIndex:e,match:Xt(r,["id","status","error","loadPromise"])}}}),h=o.routesById[u],l=t.useMemo(()=>{const t=h.options.component??o.options.defaultComponent;return t?e.jsx(t,{}):e.jsx(ns,{})},[h.options.component,o.options.defaultComponent]),d=(h.options.errorComponent??o.options.defaultErrorComponent)||Ce;if("notFound"===a.status){let t;if(Qe(a.error)){t=((null==(r=o.options.errorSerializer)?void 0:r.deserialize)??qe)(a.error.data)}else t=a.error;return Tt(Oe(t)),ss(o,h,t)}if("redirected"===a.status)throw Tt(ge(a.error)),a.loadPromise;if("error"===a.status){if(o.isServer)return e.jsx(d,{error:a.error,info:{componentStack:""}});if(Qe(a.error)){throw((null==(i=o.options.errorSerializer)?void 0:i.deserialize)??qe)(a.error.data)}throw a.error}if("pending"===a.status){const t=h.options.pendingMinMs??o.options.defaultPendingMinMs;if(t&&!(null==(n=o.getMatch(a.id))?void 0:n.minPendingPromise)&&!o.isServer){const e=ne();Promise.resolve().then(()=>{o.updateMatch(a.id,t=>({...t,minPendingPromise:e}))}),setTimeout(()=>{e.resolve(),o.updateMatch(a.id,t=>({...t,minPendingPromise:void 0}))},t)}throw a.loadPromise}return e.jsxs(e.Fragment,{children:[l,o.AfterEachMatch?e.jsx(o.AfterEachMatch,{match:a,matchIndex:c}):null]})}),ns=t.memo(function(){const s=Qt(),r=t.useContext(ke),i=we({select:t=>{var e;return null==(e=t.matches.find(t=>t.id===r))?void 0:e.routeId}}),n=s.routesById[i],{parentGlobalNotFound:o}=we({select:t=>{const e=t.matches.find(t=>t.id===r);return Tt(e),{parentGlobalNotFound:e.globalNotFound}}}),a=we({select:t=>{var e;const s=t.matches,i=s.findIndex(t=>t.id===r);return null==(e=s[i+1])?void 0:e.id}});if(o)return ss(s,n,void 0);if(!a)return null;const c=e.jsx(rs,{matchId:a}),u=s.options.defaultPendingComponent?e.jsx(s.options.defaultPendingComponent,{}):null;return r===$t?e.jsx(t.Suspense,{fallback:u,children:c}):c});function os(e,s){const i=Qt(),[n,o]=t.useState(!1),a=t.useRef(!1),c=function(e){const s=t.useRef(null);return t.useEffect(()=>{e&&("function"==typeof e?e(s.current):e.current=s.current)}),s}(s),{activeProps:u=()=>({className:"active"}),inactiveProps:h=()=>({}),activeOptions:l,to:d,preload:p,preloadDelay:f,replace:m,startTransition:y,resetScroll:v,viewTransition:g,children:b,target:S,disabled:R,style:C,className:w,onClick:O,onFocus:_,onMouseEnter:P,onMouseLeave:x,onTouchStart:M,ignoreBlocker:L,...E}=e,{params:I,search:F,hash:T,state:j,mask:D,...Q}=E,q=t.useMemo(()=>{try{return new URL(`${d}`),"external"}catch{}return"internal"},[d]),k=we({select:t=>t.location.search}),A=t.useMemo(()=>i.buildLocation(e),[i,e,k]),U=t.useMemo(()=>p??i.options.defaultPreload,[i.options.defaultPreload,p]),K=f??i.options.defaultPreloadDelay??0,B=we({select:t=>{if(null==l?void 0:l.exact){if(!(e=t.location.pathname,s=A.pathname,r=i.basepath,le(e,r)===le(s,r)))return!1}else{const e=le(t.location.pathname,i.basepath).split("/");if(!le(A.pathname,i.basepath).split("/").every((t,s)=>t===e[s]))return!1}var e,s,r;if((null==l?void 0:l.includeSearch)??1){if(!re(t.location.search,A.search,{partial:!(null==l?void 0:l.exact),ignoreUndefined:!(null==l?void 0:l.explicitUndefined)}))return!1}return!(null==l?void 0:l.includeHash)||t.location.hash===A.hash}}),N=t.useCallback(()=>{i.preloadRoute(e).catch(t=>{})},[e,i]);if(function(e,s,r={},i={}){const n=t.useRef("function"==typeof IntersectionObserver),o=t.useRef(null);t.useEffect(()=>{if(e.current&&n.current&&!i.disabled)return o.current=new IntersectionObserver(([t])=>{s(t)},r),o.current.observe(e.current),()=>{var t;null==(t=o.current)||t.disconnect()}},[s,r,i.disabled,e]),o.current}(c,t.useCallback(t=>{(null==t?void 0:t.isIntersecting)&&N()},[N]),{rootMargin:"100px"},{disabled:!(!R&&"viewport"===U)}),ie(()=>{a.current||R||"render"!==U||(N(),a.current=!0)},[R,N,U]),"external"===q)return{...Q,ref:c,type:q,href:d,...b&&{children:b},...S&&{target:S},...R&&{disabled:R},...C&&{style:C},...w&&{className:w},...O&&{onClick:O},..._&&{onFocus:_},...P&&{onMouseEnter:P},...x&&{onMouseLeave:x},...M&&{onTouchStart:M}};const $=t=>{R||U&&N()},z=$,H=t=>e=>{var s;null==(s=e.persist)||s.call(e),t.filter(Boolean).forEach(t=>{e.defaultPrevented||t(e)})},W=B?Jt(u,{})??{}:{},V=B?{}:Jt(h,{}),G=[w,W.className,V.className].filter(Boolean).join(" "),J={...C,...W.style,...V.style};return{...Q,...W,...V,href:R?void 0:A.maskedLocation?i.history.createHref(A.maskedLocation.href):i.history.createHref(A.href),ref:c,onClick:H([O,t=>{if(!(R||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||t.defaultPrevented||S&&"_self"!==S||0!==t.button)){t.preventDefault(),r.flushSync(()=>{o(!0)});const s=i.subscribe("onResolved",()=>{s(),o(!1)});i.buildAndCommitLocation({...e,replace:m,resetScroll:v,startTransition:y,viewTransition:g,ignoreBlocker:L})}}]),onFocus:H([_,$]),onMouseEnter:H([P,t=>{if(R)return;const e=t.target||{};if(U){if(e.preloadTimeout)return;e.preloadTimeout=setTimeout(()=>{e.preloadTimeout=null,N()},K)}}]),onMouseLeave:H([x,t=>{if(R)return;const e=t.target||{};e.preloadTimeout&&(clearTimeout(e.preloadTimeout),e.preloadTimeout=null)}]),onTouchStart:H([M,z]),disabled:!!R,target:S,...Object.keys(J).length&&{style:J},...G&&{className:G},...R&&{role:"link","aria-disabled":!0},...B&&{"data-status":"active","aria-current":"page"},...n&&{"data-transitioning":"transitioning"}}}const as=t.forwardRef((e,s)=>{const{_asChild:r,...i}=e,{type:n,ref:o,...a}=os(i,s),c="function"==typeof i.children?i.children({isActive:"active"===a["data-status"]}):i.children;return void 0===r&&delete a.disabled,t.createElement(r||"a",{...a,ref:o},c)});function cs(){const e=Qt(),s=t.useRef({router:e,mounted:!1}),r=we({select:t=>Xt(t,["isLoading","location","resolvedLocation","isTransitioning"])}),[i,n]=t.useTransition(),o=we({select:t=>t.matches.some(t=>"pending"===t.status)}),a=oe(r.isLoading),c=r.isLoading||i||o,u=oe(c),h=r.isLoading||o,l=oe(h);return e.isServer||(e.startReactTransition=n),t.useEffect(()=>{const t=e.history.subscribe(e.load),s=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return he(e.latestLocation.href)!==he(s.href)&&e.commitLocation({...s,replace:!0}),()=>{t()}},[e,e.history]),ie(()=>{var t;if("undefined"!=typeof window&&(null==(t=window.__TSR__)?void 0:t.dehydrated)||s.current.router===e&&s.current.mounted)return;s.current={router:e,mounted:!0};(async()=>{try{await e.load()}catch(t){}})()},[e]),ie(()=>{if(a&&!r.isLoading){const t=e.state.location,s=e.state.resolvedLocation,r=s.pathname!==t.pathname;e.emit({type:"onLoad",fromLocation:s,toLocation:t,pathChanged:r})}},[a,e,r.isLoading]),ie(()=>{if(l&&!h){const t=e.state.location,s=e.state.resolvedLocation,r=s.pathname!==t.pathname;e.emit({type:"onBeforeRouteMount",fromLocation:s,toLocation:t,pathChanged:r})}},[h,l,e]),ie(()=>{if(u&&!c){const t=e.state.location,s=e.state.resolvedLocation,r=s.pathname!==t.pathname;if(e.emit({type:"onResolved",fromLocation:s,toLocation:t,pathChanged:r}),e.__store.setState(t=>({...t,status:"idle",resolvedLocation:t.location})),"undefined"!=typeof document&&document.querySelector&&""!==e.state.location.hash){const t=document.getElementById(e.state.location.hash);t&&t.scrollIntoView()}}},[c,u,e]),null}function us(){const s=Qt(),r=s.options.defaultPendingComponent?e.jsx(s.options.defaultPendingComponent,{}):null,i=s.isServer||"undefined"!=typeof document&&window.__TSR__?es:t.Suspense,n=e.jsxs(i,{fallback:r,children:[e.jsx(cs,{}),e.jsx(hs,{})]});return s.options.InnerWrap?e.jsx(s.options.InnerWrap,{children:n}):n}function hs(){const t=we({select:t=>{var e;return null==(e=t.matches[0])?void 0:e.id}}),s=we({select:t=>t.loadedAt});return e.jsx(ke.Provider,{value:t,children:e.jsx(Se,{getResetKey:()=>s,errorComponent:Ce,onCatch:t=>{t.message||t.toString()},children:t?e.jsx(rs,{matchId:t}):null})})}function ls(t){return we({select:t=>t.matches})}function ds({router:t,children:s,...r}){t.update({...t.options,...r,context:{...t.options.context,...r.context}});const i=Dt(),n=e.jsx(i.Provider,{value:t,children:s});return t.options.Wrap?e.jsx(t.options.Wrap,{children:n}):n}function ps({router:t,...s}){return e.jsx(ds,{router:t,...s,children:e.jsx(us,{})})}const fs="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,ms="window";let ys=new WeakSet;const vs="undefined"!=typeof window&&window.sessionStorage?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:e=>{vs.state=Jt(e,vs.state),window.sessionStorage.setItem(t,JSON.stringify(vs.state))}}})():void 0,gs=t=>t.state.key||t.href;function bs(t){return function(t){const e=Qt();fs(()=>{const s=(null==t?void 0:t.getKey)||gs,{history:r}=window;r.scrollRestoration="manual";const i=t=>{if(ys.has(t.target))return;ys.add(t.target);let e="";if(t.target===document||t.target===window)e=ms;else{const s=t.target.getAttribute("data-scroll-restoration-id");e=s?`[data-scroll-restoration-id="${s}"]`:function(t){const e=[];let s;for(;s=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(s.children,t)+1})`),t=s;return`${e.join(" > ")}`.toLowerCase()}(t.target)}vs.state.next[e]||vs.set(t=>({...t,next:{...t.next,[e]:{scrollX:NaN,scrollY:NaN}}}))};"undefined"!=typeof document&&document.addEventListener("scroll",i,!0);const n=e.subscribe("onBeforeLoad",t=>{if(t.pathChanged){const e=s(t.fromLocation);for(const t in vs.state.next){const s=vs.state.next[t];if(t===ms)s.scrollX=window.scrollX||0,s.scrollY=window.scrollY||0;else if(t){const e=document.querySelector(t);s.scrollX=(null==e?void 0:e.scrollLeft)||0,s.scrollY=(null==e?void 0:e.scrollTop)||0}vs.set(r=>{const i={...r.next};return delete i[t],{...r,next:i,cached:{...r.cached,[[e,t].join("___")]:s}}})}}}),o=e.subscribe("onBeforeRouteMount",t=>{if(t.pathChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const r=s(t.toLocation);let i=!1;for(const t in vs.state.cached){const e=vs.state.cached[t],[s,n]=t.split("___");if(s===r)if(n===ms)i=!0,window.scrollTo(e.scrollX,e.scrollY);else if(n){const t=document.querySelector(n);t&&(t.scrollLeft=e.scrollX,t.scrollTop=e.scrollY)}}i||window.scrollTo(0,0),vs.set(t=>({...t,next:{}})),ys=new WeakSet}});return()=>{document.removeEventListener("scroll",i),n(),o()}},[null==t?void 0:t.getKey,e])}(t),null}function Ss(t){return we({select:t=>t.location})}export{as as L,ze as N,ns as O,G as Q,ps as R,bs as S,_t as a,Rt as b,bt as c,Ge as d,ls as e,Ss as f,$e as g,Qt as h,Ne as i,Xe as j,w as k,Ct as l,He as m,Ot as n,Ie as o,ot as p,wt as q,ve as r,ts as s,nt as u};
